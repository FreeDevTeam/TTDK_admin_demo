{"version":3,"sources":["helper/common.js","constants/url.js","services/request.js","views/components/switch/index.js","views/pages/station/formEmail.js"],"names":["getQueryString","query","result","queryString","stringify","toDataURL","src","callback","outputFormat","img","Image","crossOrigin","onload","dataURL","canvas","document","createElement","ctx","getContext","height","this","naturalHeight","width","naturalWidth","drawImage","complete","undefined","convertFileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onerror","HOST","process","send","method","path","data","headers","newUrl","url","token","window","localStorage","getItem","newToken","replace","Authorization","axios","then","catch","error","response","statusCode","message","toast","warn","clear","location","href","MySwitch","onChange","checked","disabled","className","type","FormSMTP","intl","state","useLocation","useState","userData","setUserData","useUserSMTPBrandConfig","setUseUserSMTPBrandConfig","history","useHistory","useForm","defaultValues","register","errors","handleSubmit","smtpType","setSMTPType","isOpenModalTestEmail","setIsOpenModalTestEmail","useEffect","Object","keys","length","stationUseCustomSMTP","stationCustomSMTPConfig","newData","JSON","parse","smtpServiceName","handleOnchange","name","value","onClick","goBack","formatMessage","id","toUpperCase","sm","md","onSubmit","item","updateData","stationsId","smtpHost","Number","smtpPort","smtpSecure","smtpAuthUser","smtpAuthPass","Service","res","success","action","handleUpdateData","e","newStatus","target","CustomSMTP","row","for","invalid","innerRef","required","bsSize","placeholder","smtpAuth","user","pass","Ripple","color","isOpen","toggle","preventDefault","input","getElementById","params","handleSendTestEmail","htmlFor","injectIntl","memo"],"mappings":"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","file":"static/js/20.80b4ac82.chunk.js","sourcesContent":["// @ts-nocheck\r\nimport queryString from 'query-string'\r\n\r\nexport const getQueryString = (query) => {\r\n  const result = queryString.stringify(\r\n    query,\r\n  )\r\n\r\n  if (!result) return ''\r\n  return `?${result}`\r\n}\r\n\r\nexport const debounced = (delay, fn) => {\r\n  let timerId\r\n\r\n  return (...args) => {\r\n    if (timerId) {\r\n      clearTimeout(timerId)\r\n    }\r\n\r\n    timerId = setTimeout(() => {\r\n      fn(...args)\r\n      timerId = null\r\n    }, delay)\r\n  }\r\n}\r\n\r\nexport const capitalizeFirstLetter = (stringText) => {\r\n  return stringText.charAt(0).toUpperCase() + stringText.slice(1)\r\n}\r\n\r\nexport const getParameterByName = (name, url) => {\r\n  if (!url) url = ''\r\n  // eslint-disable-next-line\r\n  name = name.replace(/[\\[\\]]/g, '\\\\$&')\r\n  let regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\r\n    results = regex.exec(url)\r\n  if (!results) return null\r\n  if (!results[2]) return ''\r\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\r\n}\r\n\r\nexport const isEquivalent = (a, b) => {\r\n  // Create arrays of property names\r\n  let aProps = Object.getOwnPropertyNames(a)\r\n  let bProps = Object.getOwnPropertyNames(b)\r\n  // If number of properties is different,\r\n  // objects are not equivalent\r\n  if (aProps.length !== bProps.length) {\r\n    return false\r\n  }\r\n  for (let i = 0; i < aProps.length; i++) {\r\n    let propName = aProps[i]\r\n    // If values of same property are not equal,\r\n    // objects are not equivalent\r\n    if (a[propName] !== b[propName]) {\r\n      return false\r\n    }\r\n  }\r\n  // If we made it this far, objects\r\n  // are considered equivalent\r\n  return true\r\n}\r\n\r\nexport const xoa_dau = (str) => {\r\n  str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, \"a\");\r\n  str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, \"e\");\r\n  str = str.replace(/ì|í|ị|ỉ|ĩ/g, \"i\");\r\n  str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, \"o\");\r\n  str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, \"u\");\r\n  str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, \"y\");\r\n  str = str.replace(/đ/g, \"d\");\r\n  str = str.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g, \"A\");\r\n  str = str.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g, \"E\");\r\n  str = str.replace(/Ì|Í|Ị|Ỉ|Ĩ/g, \"I\");\r\n  str = str.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g, \"O\");\r\n  str = str.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g, \"U\");\r\n  str = str.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g, \"Y\");\r\n  str = str.replace(/Đ/g, \"D\");\r\n  return str;\r\n}\r\n\r\nexport const number_to_price = (v) => {\r\n\r\n  if (v === 0) { return '0'; }\r\n\r\n  if (!v || v === \"\") {\r\n    return v\r\n  }\r\n  v = v.toString();\r\n\r\n  v = v.replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1.\");\r\n\r\n  v = v.split(',').join('*').split('.').join(',').split('*').join('.');\r\n  return v;\r\n}\r\n\r\nexport const price_to_number = (v) => {\r\n  if (!v) { return 0; }\r\n  v = v.split(',').join('');\r\n  v = v.split('.').join(',');\r\n\r\n  return Number(v);\r\n}\r\n\r\nexport function validateEmail(email) {\r\n  // eslint-disable-next-line\r\n  const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  return re.test(email);\r\n}\r\n\r\nexport function validatePass(pass) {\r\n  const passw = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,20}$/;\r\n  return passw.test(pass);\r\n}\r\n\r\nexport function validateNumberPhone(number) {\r\n  let c1 = number.substring(0, 4);\r\n  if (c1 === \"+855\") {\r\n    return true;\r\n  }\r\n  c1 = number.substring(0, 3);\r\n  return c1 === \"+60\" || c1 === \"+84\";\r\n}\r\n\r\nexport function toDataURL(src, callback, outputFormat) {\r\n  var img = new Image();\r\n  img.crossOrigin = 'Anonymous';\r\n  img.onload = function () {\r\n    var canvas = document.createElement('CANVAS');\r\n    var ctx = canvas.getContext('2d');\r\n    var dataURL;\r\n    canvas.height = this.naturalHeight;\r\n    canvas.width = this.naturalWidth;\r\n    ctx.drawImage(this, 0, 0);\r\n    dataURL = canvas.toDataURL(outputFormat);\r\n    callback(dataURL);\r\n  };\r\n  img.src = src;\r\n  if (img.complete || img.complete === undefined) {\r\n    img.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\r\n    img.src = src;\r\n  }\r\n}\r\n\r\nexport function convertFileToBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = reject;\r\n  });\r\n}\r\n\r\n\r\nconst _cutNumber = (number) => {\r\n  const num = number.toString()\r\n  if(num.length > 3) {\r\n    let count = 0\r\n    let arr = []\r\n    for(let i = num.length - 1; i >= 0; i--) {\r\n      count++\r\n      if(count === 3) {\r\n        const str = num[i] + num[i+1] + num[i+2]\r\n        arr.push(str)\r\n        count = 0;\r\n      }\r\n      if(i === 0) {\r\n        if(count === 2) {\r\n          const str = num[i] + num[i+1]\r\n          arr.push(str)\r\n        } else if(count === 1) {\r\n          const str = num[i]\r\n          arr.push(str)\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    console.log(arr)\r\n    return arr.reverse().join(',')\r\n  } else {\r\n    return num;\r\n  }\r\n}\r\n\r\nexport function formatDot(number) {\r\n  if (!number) {\r\n    return ''\r\n  }\r\n  return _cutNumber(number)\r\n}\r\n\r\nexport function formatVND(number) {\r\n  if (!number) {\r\n    return ''\r\n  }\r\n  if (typeof number === 'number') {\r\n    return _cutNumber(number)\r\n  }\r\n\r\n  if(typeof number === 'string') {\r\n    let arrValue = number.split('.')\r\n    let formatedValue = _cutNumber(arrValue[0]);\r\n    return `${formatedValue}.${arrValue[1]}`;\r\n  }\r\n}","export const HOST = process.env.REACT_APP_API_URL || \"https://cdn-dev.kiemdinhoto.vn/\"\r\n\r\nexport const IMAGE_HOST = HOST + 'upload/'","// @ts-nocheck\r\nimport axios from 'axios'\r\nimport { HOST } from './../constants/url'\r\nimport { toast } from 'react-toastify';\r\nimport {\r\n  getQueryString,\r\n} from '../helper/common'\r\n\r\nfunction send({\r\n  method = 'get', path, data = null, query = null, headers = {}, newUrl\r\n}) {\r\n  return new Promise((resolve) => {\r\n    let url = HOST + `${path}${getQueryString(query)}`\r\n    if (newUrl) {\r\n      url = `${newUrl}${getQueryString(query)}`\r\n    }\r\n    let token = window.localStorage.getItem('accessToken')\r\n    \r\n    if (token) {\r\n      const newToken = token.replace(/\"/g, \"\");\r\n      headers.Authorization =`Bearer ${newToken}`\r\n    }\r\n    axios({\r\n      method, url, data, headers,\r\n    })\r\n      .then((result) => {\r\n        const data = result.data\r\n        return resolve(data)\r\n      })\r\n      .catch((error) => {\r\n        const {response ={}} = error\r\n        \r\n        const result = response.data ? response.data :null\r\n         \r\n        if (!result) {\r\n          toast.warn(\"Error from server\")\r\n        }\r\n        else {\r\n          const { statusCode, message: data } = result\r\n          if(statusCode === 505){\r\n            toast.warn(\"Unauthorized\")\r\n          }\r\n          else if (\r\n            (statusCode === 413 && data === 'Payload content length greater than maximum allowed: 10485760')) {\r\n            toast.warn(\"Image too large\")\r\n          }\r\n         else if (statusCode === 401 && data === 'Expired token received for JSON Web Token validation') {\r\n            window.localStorage.clear()\r\n            window.location.href = '/'\r\n           \r\n          }\r\n          else if (\r\n            (statusCode === 401 && data === 'Unauthorized') || (statusCode === 403 && data === 'InvalidToken')) {\r\n              window.localStorage.clear()\r\n              window.location.href = '/'\r\n            \r\n          } else {\r\n            return resolve(result.data)\r\n          }\r\n        }\r\n      })\r\n  })\r\n}\r\n\r\nexport default {\r\n  send,\r\n}\r\n","import React from 'react'\r\nimport './mySwitch.scss'\r\nexport default function MySwitch({\r\n  onChange,\r\n  checked,\r\n  disabled\r\n}) {\r\n  return (\r\n    <label className=\"switch\">\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={checked}\r\n        onChange={onChange}\r\n        disabled={disabled}\r\n      />\r\n      <span className=\"slider round\"></span>\r\n    </label>\r\n  )\r\n}","// @ts-nocheck\r\n// ** React Imports\r\nimport { Fragment, useState, useEffect, memo } from 'react'\r\n// ** Store & Actions\r\nimport { toast } from 'react-toastify';\r\nimport _ from 'lodash'\r\nimport \"./index.scss\"\r\nimport { useForm } from 'react-hook-form'\r\nimport '@styles/react/libs/tables/react-dataTable-component.scss'\r\nimport Service from '../../../services/request'\r\nimport 'uppy/dist/uppy.css'\r\nimport '@uppy/status-bar/dist/style.css'\r\nimport '@styles/react/libs/file-uploader/file-uploader.scss'\r\nimport {\r\n  Card, Input, Label, Row, Col,\r\n  Button, FormGroup, Form, Modal,\r\n  ModalHeader, ModalBody, ModalFooter\r\n} from 'reactstrap'\r\nimport { useLocation } from 'react-router-dom'\r\nimport { injectIntl } from 'react-intl';\r\nimport { useHistory } from 'react-router-dom'\r\nimport MySwitch from '../../components/switch';\r\nimport { ChevronLeft } from 'react-feather';\r\n\r\nconst FormSMTP = ({ intl }) => {\r\n  // ** Store Vars\r\n  const { state } = useLocation()\r\n  const [userData, setUserData] = useState({})\r\n  const [useUserSMTPBrandConfig, setUseUserSMTPBrandConfig] = useState(0)\r\n  const history = useHistory()\r\n  const { register, errors, handleSubmit } = useForm({\r\n    defaultValues: {}\r\n  })\r\n  const [smtpType, setSMTPType] = useState(\"default\")\r\n  const [isOpenModalTestEmail, setIsOpenModalTestEmail] = useState(false)\r\n  \r\n  useEffect(() => {\r\n    if (state && Object.keys(state).length > 0) {\r\n      setUseUserSMTPBrandConfig(state.stationUseCustomSMTP)\r\n      if (state.stationCustomSMTPConfig) {\r\n        const newData = JSON.parse(state.stationCustomSMTPConfig) \r\n        setUserData(newData)\r\n        setSMTPType(newData.smtpServiceName)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  function handleUpdateData(item) {\r\n      if(Object.keys(errors).length === 0) {\r\n        const updateData = {\r\n          \"stationsId\": state.stationsId,\r\n          \"smtpHost\": item.smtpHost,\r\n          \"smtpPort\": Number(item.smtpPort),\r\n          \"smtpSecure\": userData.smtpSecure.toUpperCase(),\r\n          \"smtpServiceName\": smtpType,\r\n          \"smtpAuth\": {\r\n            \"user\": item.smtpAuthUser,\r\n            \"pass\": item.smtpAuthPass\r\n          }\r\n        }  \r\n        Service.send({\r\n          method: 'POST', path: 'Stations/updateConfigSMTP', data: updateData, query: null\r\n        }).then(res => {\r\n          if (res) {\r\n            const { statusCode } = res\r\n            if (statusCode === 200) {\r\n              toast.success(intl.formatMessage({ id: 'actionSuccess' }, { action: intl.formatMessage({ id: \"update\" }) }))\r\n              // setTimeout(() => {\r\n              //   history.push('/pages/station')\r\n              // }, 1000)\r\n            } else {\r\n              toast.warn(intl.formatMessage({ id: 'actionFailed' }, { action: intl.formatMessage({ id: \"update\" }) }))\r\n            }\r\n          }\r\n        })\r\n      }\r\n  }\r\n\r\n  const handleOnchange = (name, value) => {\r\n    setUserData(\r\n      {\r\n        ...userData,\r\n        [name]: value\r\n      }\r\n    )\r\n  }\r\n\r\n  const onChangeUseCustomSMTPBrand = (newStatus) => {\r\n    Service.send({\r\n      method: 'POST', path: 'Stations/updateCustomSMTP', data: {\r\n        stationsId: state.stationsId,\r\n        CustomSMTP: newStatus\r\n      }, query: null\r\n    }).then(res => {\r\n      if (res) {\r\n        const { statusCode } = res\r\n        if (statusCode === 200) {\r\n          setUseUserSMTPBrandConfig(newStatus)\r\n        } else {\r\n          toast.warn(intl.formatMessage({ id: 'actionFailed' }, { action: intl.formatMessage({ id: \"update\" }) }))\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  function handleSelectSMTPType(e) {\r\n    const { value } = e.target\r\n    let newValue = userData\r\n    // if(value === \"gmail\" && useUserSMTPBrandConfig) {\r\n    //   newValue.smtpHost = \"smtp.gmail.com\"\r\n    //   newValue.smtpPort =  \"555\"\r\n    // }\r\n    setUserData(newValue)\r\n    setSMTPType(value)\r\n  }\r\n  \r\n  function handleSendTestEmail(value) {\r\n    const userEmail = userData.smtpAuth.user\r\n    const passEmail = userData.smtpAuth.pass\r\n    const params = {\r\n      \"testEmail\": value,\r\n      \"emailUsername\": userEmail,\r\n      \"emailPassword\": passEmail,\r\n      \"emailConfig\": {\r\n        \"emailHost\": userData.smtpHost,\r\n        \"emailPort\": Number(userData.smtpPort),\r\n        \"emailSecure\": userData.smtpSecure.toUpperCase(),\r\n      },\r\n      \"emailProvider\": \"CUSTOM\"\r\n    }\r\n    Service.send({\r\n      method: \"POST\",\r\n      path: 'CustomerMessage/sendTestEmail',\r\n      data: params\r\n    }).then(result => {\r\n      if (result && result.statusCode === 200) {\r\n        toast.success(intl.formatMessage({ id: \"sent\" }, { type: \"\" }))\r\n        setIsOpenModalTestEmail(false)\r\n      } else {\r\n        toast.error(intl.formatMessage({ id: \"sendMailTestFailed\" }, { type: \"\" }))\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Card  >\r\n        <div className=\"pt-1 pl-1 pointer\" onClick={history.goBack}>\r\n          <ChevronLeft />\r\n          {intl.formatMessage({ id: \"goBack\" })}\r\n        </div>\r\n        <div className=\"accountAdmin\">\r\n          <h1 className=\"accountAdmin__title\">\r\n            {intl.formatMessage({ id: \"info\" }, { type: \"email server (SMTP)\" }).toUpperCase()}\r\n          </h1>\r\n          <Row>\r\n            <Col sm=\"12\" md=\"8\">\r\n              <Form onSubmit={handleSubmit((data) => {\r\n                handleUpdateData(data)\r\n              })}\r\n              >\r\n                <FormGroup className=\"row\">\r\n                  <Label sm=\"3\">\r\n                    {intl.formatMessage({ id: \"stationUseCustomSMSBrand\" }, {type:\"(SMTP)\"})}\r\n                  </Label>\r\n\r\n                  <Col sm='9'>\r\n                    <MySwitch\r\n                      checked={useUserSMTPBrandConfig === 1 ? true : false}\r\n                      onChange={(e) => onChangeUseCustomSMTPBrand(e.target.checked ? 1 : 0)}\r\n                      \r\n                    />\r\n                  </Col>\r\n                </FormGroup>\r\n\r\n                <FormGroup row>\r\n                  <Label sm=\"3\" for='smtpServiceName'>\r\n                    {intl.formatMessage({id: \"service\"}, {type: \"Email\"})}\r\n                  </Label>\r\n\r\n                  <Col sm='5'>\r\n                    <Input\r\n                      className='w-100'\r\n                      id=\"smtpServiceName\"\r\n                      type='select'\r\n                      invalid={errors.smtpServiceName && true}\r\n                      innerRef={register({ required: true })}\r\n                      name='smtpServiceName'\r\n                      bsSize='sm'\r\n                      value={smtpType}\r\n                      onChange={handleSelectSMTPType}\r\n                      disabled={(useUserSMTPBrandConfig === 0) ? true : false}\r\n                    >\r\n                      <option value=\"default\">Dịch vụ mặc định</option>\r\n                    </Input>\r\n                  </Col>\r\n                  <Col sm=\"4\"/>\r\n                </FormGroup>\r\n\r\n                \r\n\r\n                <FormGroup row>\r\n                  <Label sm=\"3\" for='smtpSecure'>\r\n                    Bảo mật SMTP (SMTP Secure)\r\n                  </Label>\r\n\r\n                  <Col sm='6'>\r\n                    <MySwitch\r\n                      checked={userData && userData.smtpSecure === \"ON\" ? true : false}\r\n                      onChange={(e) => {\r\n                        handleOnchange(\"smtpSecure\", e.target.checked ? \"ON\" : \"OFF\")\r\n                      }}\r\n                      disabled={useUserSMTPBrandConfig === 0 ? true : false}\r\n                    />\r\n                  </Col>\r\n                  \r\n                </FormGroup> \r\n\r\n                <FormGroup row>\r\n                  <Label sm=\"3\" for='smtpHost'>\r\n                    SMTP Host\r\n                  </Label>\r\n                  <Col sm='5'>\r\n                    <Input\r\n                      id='smtpHost'\r\n                      name='smtpHost'\r\n                      innerRef={register({ required: true })}\r\n                      invalid={errors.smtpHost && true}\r\n                      placeholder='SMS Url'\r\n                      value={(userData && userData.smtpHost) || ''}\r\n                      onChange={(e) => {\r\n                        const { name, value } = e.target\r\n                        handleOnchange(name, value)\r\n                      }}\r\n                      disabled={(useUserSMTPBrandConfig === 0) ? true : false}\r\n                    />\r\n                  </Col>\r\n                  <Col sm=\"4\">\r\n                    <i>Ví dụ: user17.emailserver.vn</i>\r\n                  </Col>\r\n                </FormGroup>\r\n\r\n                <FormGroup row>\r\n                  <Label sm=\"3\" for='smtpPort'>\r\n                    SMTP Port\r\n                  </Label>\r\n\r\n                  <Col sm='5'>\r\n                    <Input\r\n                      id='smtpPort'\r\n                      type=\"number\"\r\n                      name='smtpPort'\r\n                      innerRef={register({ required: true })}\r\n                      invalid={errors.smtpPort && true}\r\n                      placeholder='SMTP Port'\r\n                      value={userData && userData.smtpPort && userData.smtpPort || ''}\r\n                      onChange={(e) => {\r\n                        const { name, value } = e.target\r\n                        handleOnchange(name, value)\r\n                      }}\r\n                      disabled={(useUserSMTPBrandConfig === 0) ? true : false}\r\n                    />\r\n                  </Col>\r\n                  <Col sm=\"4\">\r\n                    <i>Ví dụ: 123</i>\r\n                  </Col>\r\n                </FormGroup>\r\n\r\n                <FormGroup row>\r\n                  <Label sm=\"3\" for='smtpAuthUser'>\r\n                    Email\r\n                  </Label>\r\n\r\n                  <Col sm='5'>\r\n                    <Input\r\n                      name='smtpAuthUser'\r\n                      id='smtpAuthUser'\r\n                      innerRef={register({ required: true })}\r\n                      invalid={errors.smtpAuthUser && true}\r\n                      value={userData && userData.smtpAuth && userData.smtpAuth.user || \"\"}\r\n                      placeholder={intl.formatMessage({ id: \"smsUsername\" }, {type: \"SMTP\"})}\r\n                      onChange={(e) => {\r\n                        const { name, value } = e.target\r\n                        setUserData({\r\n                          ...userData, \r\n                          smtpAuth: {...userData.smtpAuth, user: value }\r\n                        })\r\n                      }}\r\n                      disabled={(useUserSMTPBrandConfig === 0) ? true : false}\r\n                    />\r\n                  </Col>\r\n                  <Col sm=\"4\">\r\n                    <i>Ví dụ: example@example.vn</i>\r\n                  </Col>\r\n                </FormGroup>\r\n\r\n                <FormGroup row>\r\n                  <Label sm=\"3\" for='smtpAuthPass'>\r\n                    {intl.formatMessage({ id: \"smsPassword\" }, { type: \"\"})}\r\n                  </Label>\r\n\r\n                  <Col sm='5'>\r\n                    <Input\r\n                      name='smtpAuthPass'\r\n                      id='smtpAuthPass'\r\n                      type=\"password\"\r\n                      innerRef={register({ required: true })}\r\n                      invalid={errors.smtpAuthPass && true}\r\n                      value={userData && userData.smtpAuth && userData.smtpAuth.pass || \"\"}\r\n                      placeholder={intl.formatMessage({ id: \"smsPassword\" }, { type: \"SMTP\"})}\r\n                      onChange={(e) => {\r\n                        const { value } = e.target\r\n                        setUserData({\r\n                          ...userData, \r\n                          smtpAuth: {...userData.smtpAuth, pass: value }\r\n                        })\r\n                      }}\r\n                      disabled={(useUserSMTPBrandConfig === 0) ? true : false}\r\n                    />\r\n                  </Col>\r\n                  <Col sm=\"4\">\r\n                    <i>Ví dụ: abc123...</i>\r\n                  </Col>\r\n                </FormGroup>\r\n                \r\n                <div className='row m-0 mt-3'>\r\n                  <FormGroup className='p-0 col-12 col-sm-3'>\r\n                    <Button.Ripple className='w-100' color='primary' type='submit'>\r\n                      {intl.formatMessage({ id: \"submit\" })}\r\n                    </Button.Ripple>\r\n\r\n                  </FormGroup>\r\n                  <div className='col-1' />\r\n                  {useUserSMTPBrandConfig === 1 && <FormGroup className='col-12 col-sm-3 p-0'>\r\n                    <Button.Ripple className='w-100' color=\"primary\" disabled={(useUserSMTPBrandConfig === 1) ? false : true} onClick={() => setIsOpenModalTestEmail(true)}>\r\n                      Test Email\r\n                    </Button.Ripple>\r\n                  </FormGroup>}\r\n                </div>\r\n              </Form>\r\n\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </Card>\r\n\r\n      <Modal isOpen={isOpenModalTestEmail} toggle={() => setIsOpenModalTestEmail(!isOpenModalTestEmail)}>\r\n        <Form onSubmit={(e) => {\r\n          e.preventDefault()\r\n          const input = document.getElementById('testEmail')\r\n          if(input.value) {\r\n            handleSendTestEmail(input.value)\r\n          }\r\n        }}>\r\n        <ModalHeader toggle={() => setIsOpenModalTestEmail(!isOpenModalTestEmail)}>{intl.formatMessage({id:\"checkEmail\"})}</ModalHeader>\r\n          <ModalBody>\r\n            <label htmlFor='testEmail'>{intl.formatMessage({id:\"enterPhoneSendEmail\"})}</label>\r\n            <FormGroup>\r\n              <Input\r\n                name=\"testEmail\"\r\n                id=\"testEmail\"\r\n                placeholder=\"Nhập Email\"\r\n                type=\"email\"\r\n                required\r\n              />\r\n            </FormGroup>\r\n          </ModalBody>\r\n          <ModalFooter>\r\n            <FormGroup>\r\n            <Button color='primary'\r\n              type='submit'\r\n            >{intl.formatMessage({id: \"send\"})}</Button>\r\n          </FormGroup>\r\n          </ModalFooter>\r\n          </Form>\r\n      </Modal>\r\n\r\n    </Fragment >\r\n  )\r\n}\r\nexport default injectIntl(memo(FormSMTP))\r\n"],"sourceRoot":""}