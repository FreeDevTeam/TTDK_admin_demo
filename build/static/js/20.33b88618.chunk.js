(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[20],{452:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var s=a(460),c=a.n(s),n=function(e){var t=c.a.stringify(e);return t?"?".concat(t):""};function r(e,t,a){var s=new Image;s.crossOrigin="Anonymous",s.onload=function(){var e,s=document.createElement("CANVAS"),c=s.getContext("2d");s.height=this.naturalHeight,s.width=this.naturalWidth,c.drawImage(this,0,0),e=s.toDataURL(a),t(e)},s.src=e,(s.complete||void 0===s.complete)&&(s.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",s.src=e)}function i(e){return new Promise((function(t,a){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){return t(s.result)},s.onerror=a}))}},453:function(e,t,a){"use strict";var s=a(78),c=a.n(s),n="https://cdn.kiemdinhoto.vn/",r=a(116),i=a(452);t.a={send:function(e){var t=e.method,a=void 0===t?"get":t,s=e.path,o=e.data,d=void 0===o?null:o,l=e.query,m=void 0===l?null:l,u=e.headers,j=void 0===u?{}:u,h=e.newUrl;return new Promise((function(e){var t=n+"".concat(s).concat(Object(i.b)(m));h&&(t="".concat(h).concat(Object(i.b)(m)));var o=window.localStorage.getItem("accessToken");if(o){var l=o.replace(/"/g,"");j.Authorization="Bearer ".concat(l)}c()({method:a,url:t,data:d,headers:j}).then((function(t){var a=t.data;return e(a)})).catch((function(t){var a=t.response,s=void 0===a?{}:a,c=s.data?s.data:null;if(c){var n=c.statusCode,i=c.message;if(505===n)r.c.warn("Unauthorized");else if(413===n&&"Payload content length greater than maximum allowed: 1048576"===i)r.c.warn("Image too large");else if(401===n&&"Expired token received for JSON Web Token validation"===i)window.localStorage.clear(),window.location.href="/";else{if(!(401===n&&"Unauthorized"===i||403===n&&"InvalidToken"===i))return e(c.data);window.localStorage.clear(),window.location.href="/"}}else r.c.warn("Error from server")}))}))}}},458:function(e,t,a){},472:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(0),a(473);var s=a(6);function c(e){var t=e.onChange,a=e.checked,c=e.disabled;return Object(s.jsxs)("label",{className:"switch",children:[Object(s.jsx)("input",{type:"checkbox",checked:a,onChange:t,disabled:c}),Object(s.jsx)("span",{className:"slider round"})]})}},473:function(e,t,a){},503:function(e,t,a){},504:function(e,t,a){},966:function(e,t,a){"use strict";a.r(t);var s=a(30),c=a(1),n=a(16),r=a(0),i=a(116),o=(a(465),a(503),a(466)),d=(a(458),a(453)),l=(a(514),a(515),a(504),a(664)),m=a(540),u=a(541),j=a(930),h=a(948),b=a(961),p=a(663),O=a(447),f=a(602),v=a(599),x=a(600),g=a(965),S=a(457),A=a(126),w=a(472),P=a(637),M=a(6),C=function(e){var t=e.intl,a=Object(S.h)().state,A=Object(r.useState)({}),C=Object(n.a)(A,2),y=C[0],N=C[1],T=Object(r.useState)(0),k=Object(n.a)(T,2),U=k[0],E=k[1],H=Object(S.g)(),I=Object(o.a)({defaultValues:{}}),R=I.register,q=I.errors,B=I.handleSubmit,F=Object(r.useState)("default"),V=Object(n.a)(F,2),D=V[0],z=V[1],J=Object(r.useState)(!1),L=Object(n.a)(J,2),Q=L[0],W=L[1];Object(r.useEffect)((function(){if(a&&Object.keys(a).length>0&&(E(a.stationUseCustomSMTP),a.stationCustomSMTPConfig)){var e=JSON.parse(a.stationCustomSMTPConfig);N(e),z(e.smtpServiceName)}}),[a]);var _=function(e,t){N(Object(c.a)(Object(c.a)({},y),{},Object(s.a)({},e,t)))};return Object(M.jsxs)(r.Fragment,{children:[Object(M.jsxs)(l.a,{children:[Object(M.jsxs)("div",{className:"pt-1 pl-1 pointer",onClick:H.goBack,children:[Object(M.jsx)(P.a,{}),t.formatMessage({id:"goBack"})]}),Object(M.jsxs)("div",{className:"accountAdmin",children:[Object(M.jsx)("h1",{className:"accountAdmin__title",children:t.formatMessage({id:"info"},{type:"email server (SMTP)"}).toUpperCase()}),Object(M.jsx)(m.a,{children:Object(M.jsx)(u.a,{sm:"12",md:"8",children:Object(M.jsxs)(j.a,{onSubmit:B((function(e){!function(e){if(0===Object.keys(q).length){var s={stationsId:a.stationsId,smtpHost:e.smtpHost,smtpPort:Number(e.smtpPort),smtpSecure:y.smtpSecure.toUpperCase(),smtpServiceName:D,smtpAuth:{user:e.smtpAuthUser,pass:e.smtpAuthPass}};d.a.send({method:"POST",path:"Stations/updateConfigSMTP",data:s,query:null}).then((function(e){e&&(200===e.statusCode?i.c.success(t.formatMessage({id:"actionSuccess"},{action:t.formatMessage({id:"update"})})):i.c.warn(t.formatMessage({id:"actionFailed"},{action:t.formatMessage({id:"update"})})))}))}}(e)})),children:[Object(M.jsxs)(h.a,{className:"row",children:[Object(M.jsx)(b.a,{sm:"3",children:t.formatMessage({id:"stationUseCustomSMSBrand"},{type:"(SMTP)"})}),Object(M.jsx)(u.a,{sm:"9",children:Object(M.jsx)(w.a,{checked:1===U,onChange:function(e){return s=e.target.checked?1:0,void d.a.send({method:"POST",path:"Stations/updateCustomSMTP",data:{stationsId:a.stationsId,CustomSMTP:s},query:null}).then((function(e){e&&(200===e.statusCode?E(s):i.c.warn(t.formatMessage({id:"actionFailed"},{action:t.formatMessage({id:"update"})})))}));var s}})})]}),Object(M.jsxs)(h.a,{row:!0,children:[Object(M.jsx)(b.a,{sm:"3",for:"smtpServiceName",children:t.formatMessage({id:"service"},{type:"Email"})}),Object(M.jsx)(u.a,{sm:"5",children:Object(M.jsx)(p.a,{className:"w-100",id:"smtpServiceName",type:"select",invalid:q.smtpServiceName&&!0,innerRef:R({required:!0}),name:"smtpServiceName",bsSize:"sm",value:D,onChange:function(e){var t=e.target.value;N(y),z(t)},disabled:0===U,children:Object(M.jsx)("option",{value:"default",children:"D\u1ecbch v\u1ee5 m\u1eb7c \u0111\u1ecbnh"})})}),Object(M.jsx)(u.a,{sm:"4"})]}),Object(M.jsxs)(h.a,{row:!0,children:[Object(M.jsx)(b.a,{sm:"3",for:"smtpSecure",children:"B\u1ea3o m\u1eadt SMTP (SMTP Secure)"}),Object(M.jsx)(u.a,{sm:"6",children:Object(M.jsx)(w.a,{checked:!(!y||"ON"!==y.smtpSecure),onChange:function(e){_("smtpSecure",e.target.checked?"ON":"OFF")},disabled:0===U})})]}),Object(M.jsxs)(h.a,{row:!0,children:[Object(M.jsx)(b.a,{sm:"3",for:"smtpHost",children:"SMTP Host"}),Object(M.jsx)(u.a,{sm:"5",children:Object(M.jsx)(p.a,{id:"smtpHost",name:"smtpHost",innerRef:R({required:!0}),invalid:q.smtpHost&&!0,placeholder:"SMS Url",value:y&&y.smtpHost||"",onChange:function(e){var t=e.target,a=t.name,s=t.value;_(a,s)},disabled:0===U})}),Object(M.jsx)(u.a,{sm:"4",children:Object(M.jsx)("i",{children:"V\xed d\u1ee5: user17.emailserver.vn"})})]}),Object(M.jsxs)(h.a,{row:!0,children:[Object(M.jsx)(b.a,{sm:"3",for:"smtpPort",children:"SMTP Port"}),Object(M.jsx)(u.a,{sm:"5",children:Object(M.jsx)(p.a,{id:"smtpPort",type:"number",name:"smtpPort",innerRef:R({required:!0}),invalid:q.smtpPort&&!0,placeholder:"SMTP Port",value:y&&y.smtpPort&&y.smtpPort||"",onChange:function(e){var t=e.target,a=t.name,s=t.value;_(a,s)},disabled:0===U})}),Object(M.jsx)(u.a,{sm:"4",children:Object(M.jsx)("i",{children:"V\xed d\u1ee5: 123"})})]}),Object(M.jsxs)(h.a,{row:!0,children:[Object(M.jsx)(b.a,{sm:"3",for:"smtpAuthUser",children:"Email"}),Object(M.jsx)(u.a,{sm:"5",children:Object(M.jsx)(p.a,{name:"smtpAuthUser",id:"smtpAuthUser",innerRef:R({required:!0}),invalid:q.smtpAuthUser&&!0,value:y&&y.smtpAuth&&y.smtpAuth.user||"",placeholder:t.formatMessage({id:"smsUsername"},{type:"SMTP"}),onChange:function(e){var t=e.target,a=(t.name,t.value);N(Object(c.a)(Object(c.a)({},y),{},{smtpAuth:Object(c.a)(Object(c.a)({},y.smtpAuth),{},{user:a})}))},disabled:0===U})}),Object(M.jsx)(u.a,{sm:"4",children:Object(M.jsx)("i",{children:"V\xed d\u1ee5: example@example.vn"})})]}),Object(M.jsxs)(h.a,{row:!0,children:[Object(M.jsx)(b.a,{sm:"3",for:"smtpAuthPass",children:t.formatMessage({id:"smsPassword"},{type:""})}),Object(M.jsx)(u.a,{sm:"5",children:Object(M.jsx)(p.a,{name:"smtpAuthPass",id:"smtpAuthPass",type:"password",innerRef:R({required:!0}),invalid:q.smtpAuthPass&&!0,value:y&&y.smtpAuth&&y.smtpAuth.pass||"",placeholder:t.formatMessage({id:"smsPassword"},{type:"SMTP"}),onChange:function(e){var t=e.target.value;N(Object(c.a)(Object(c.a)({},y),{},{smtpAuth:Object(c.a)(Object(c.a)({},y.smtpAuth),{},{pass:t})}))},disabled:0===U})}),Object(M.jsx)(u.a,{sm:"4",children:Object(M.jsx)("i",{children:"V\xed d\u1ee5: abc123..."})})]}),Object(M.jsxs)("div",{className:"row m-0 mt-3",children:[Object(M.jsx)(h.a,{className:"p-0 col-12 col-sm-3",children:Object(M.jsx)(O.a.Ripple,{className:"w-100",color:"primary",type:"submit",children:t.formatMessage({id:"submit"})})}),Object(M.jsx)("div",{className:"col-1"}),1===U&&Object(M.jsx)(h.a,{className:"col-12 col-sm-3 p-0",children:Object(M.jsx)(O.a.Ripple,{className:"w-100",color:"primary",disabled:1!==U,onClick:function(){return W(!0)},children:"Test Email"})})]})]})})})]})]}),Object(M.jsx)(f.a,{isOpen:Q,toggle:function(){return W(!Q)},children:Object(M.jsxs)(j.a,{onSubmit:function(e){e.preventDefault();var a=document.getElementById("testEmail");a.value&&function(e){var a={testEmail:e,emailUsername:y.smtpAuth.user,emailPassword:y.smtpAuth.pass,emailConfig:{emailHost:y.smtpHost,emailPort:Number(y.smtpPort),emailSecure:y.smtpSecure.toUpperCase()},emailProvider:"CUSTOM"};d.a.send({method:"POST",path:"CustomerMessage/sendTestEmail",data:a}).then((function(e){e&&200===e.statusCode?(i.c.success(t.formatMessage({id:"sent"},{type:""})),W(!1)):i.c.error(t.formatMessage({id:"sendMailTestFailed"},{type:""}))}))}(a.value)},children:[Object(M.jsx)(v.a,{toggle:function(){return W(!Q)},children:t.formatMessage({id:"checkEmail"})}),Object(M.jsxs)(x.a,{children:[Object(M.jsx)("label",{htmlFor:"testEmail",children:t.formatMessage({id:"enterPhoneSendEmail"})}),Object(M.jsx)(h.a,{children:Object(M.jsx)(p.a,{name:"testEmail",id:"testEmail",placeholder:"Nh\u1eadp Email",type:"email",required:!0})})]}),Object(M.jsx)(g.a,{children:Object(M.jsx)(h.a,{children:Object(M.jsx)(O.a,{color:"primary",type:"submit",children:t.formatMessage({id:"send"})})})})]})})]})};t.default=Object(A.c)(Object(r.memo)(C))}}]);
//# sourceMappingURL=20.33b88618.chunk.js.map