(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[21],{452:function(e,s,a){"use strict";a.d(s,"b",(function(){return r})),a.d(s,"c",(function(){return c})),a.d(s,"a",(function(){return i}));var t=a(460),n=a.n(t),r=function(e){var s=n.a.stringify(e);return s?"?".concat(s):""};function c(e,s,a){var t=new Image;t.crossOrigin="Anonymous",t.onload=function(){var e,t=document.createElement("CANVAS"),n=t.getContext("2d");t.height=this.naturalHeight,t.width=this.naturalWidth,n.drawImage(this,0,0),e=t.toDataURL(a),s(e)},t.src=e,(t.complete||void 0===t.complete)&&(t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t.src=e)}function i(e){return new Promise((function(s,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){return s(t.result)},t.onerror=a}))}},453:function(e,s,a){"use strict";var t=a(78),n=a.n(t),r="https://cdn.kiemdinhoto.vn/",c=a(116),i=a(452);s.a={send:function(e){var s=e.method,a=void 0===s?"get":s,t=e.path,d=e.data,o=void 0===d?null:d,m=e.query,l=void 0===m?null:m,j=e.headers,u=void 0===j?{}:j,h=e.newUrl;return new Promise((function(e){var s=r+"".concat(t).concat(Object(i.b)(l));h&&(s="".concat(h).concat(Object(i.b)(l)));var d=window.localStorage.getItem("accessToken");if(d){var m=d.replace(/"/g,"");u.Authorization="Bearer ".concat(m)}n()({method:a,url:s,data:o,headers:u}).then((function(s){var a=s.data;return e(a)})).catch((function(s){var a=s.response,t=void 0===a?{}:a,n=t.data?t.data:null;if(n){var r=n.statusCode,i=n.message;if(505===r)c.c.warn("Unauthorized");else if(401===r&&"Expired token received for JSON Web Token validation"===i)window.localStorage.clear(),window.location.href="/";else{if(!(401===r&&"Unauthorized"===i||403===r&&"InvalidToken"===i))return e(n.data);window.localStorage.clear(),window.location.href="/"}}else c.c.warn("Error from server")}))}))}}},458:function(e,s,a){},472:function(e,s,a){"use strict";a.d(s,"a",(function(){return n}));a(0),a(473);var t=a(6);function n(e){var s=e.onChange,a=e.checked,n=e.disabled;return Object(t.jsxs)("label",{className:"switch",children:[Object(t.jsx)("input",{type:"checkbox",checked:a,onChange:s,disabled:n}),Object(t.jsx)("span",{className:"slider round"})]})}},473:function(e,s,a){},503:function(e,s,a){},504:function(e,s,a){},964:function(e,s,a){"use strict";a.r(s);var t=a(30),n=a(1),r=a(16),c=a(0),i=a(116),d=(a(465),a(503),a(466)),o=(a(458),a(453)),m=(a(514),a(515),a(504),a(664)),l=a(540),j=a(541),u=a(930),h=a(948),b=a(961),f=a(663),O=a(447),S=a(602),v=a(599),g=a(600),x=a(965),p=a(457),M=a(126),C=a(472),w=a(637),P=a(6),U=function(e){var s=e.intl,a=Object(p.h)().state,M=Object(c.useState)({}),U=Object(r.a)(M,2),y=U[0],A=U[1],N=Object(c.useState)(0),I=Object(r.a)(N,2),B=I[0],T=I[1],k=Object(c.useState)(0),V=Object(r.a)(k,2),E=V[0],R=V[1],q=Object(c.useState)(!1),F=Object(r.a)(q,2),L=F[0],D=F[1],z=Object(c.useState)(""),J=Object(r.a)(z,2),Q=J[0],W=J[1],_=Object(p.g)(),G=Object(d.a)({defaultValues:{}}),H=G.register,K=G.errors,X=G.handleSubmit;Object(c.useEffect)((function(){a&&Object.keys(a).length>0&&(A(a.stationCustomSMSBrandConfig?JSON.parse(a.stationCustomSMSBrandConfig):{}),R(a.stationEnableUseSMS),T(a.stationUseCustomSMSBrand))}),[a]);var Y=function(e,s){A(Object(n.a)(Object(n.a)({},y),{},Object(t.a)({},e,s)))};return Object(P.jsxs)(c.Fragment,{children:[Object(P.jsxs)(m.a,{children:[Object(P.jsxs)("div",{className:"pt-1 pl-1 pointer",onClick:_.goBack,children:[Object(P.jsx)(w.a,{}),s.formatMessage({id:"goBack"})]}),Object(P.jsxs)("div",{className:"accountAdmin",children:[Object(P.jsx)("h1",{className:"accountAdmin__title",children:s.formatMessage({id:"info"},{type:"SMS"}).toUpperCase()}),Object(P.jsx)(l.a,{children:Object(P.jsx)(j.a,{sm:"12",md:"8",children:Object(P.jsxs)(u.a,{onSubmit:X((function(e){!function(e){if(1===E&&1===B){if(0===Object.keys(K).length){var t={stationsId:a.stationsId,smsUrl:e.smsUrl,smsUserName:e.smsUserName,smsPassword:e.smsPassword,smsBrand:e.smsBrand,smsCPCode:e.smsCPCode,smsServiceId:e.smsServiceId,smsProvider:Q};o.a.send({method:"POST",path:"Stations/updateConfigSMS",data:t,query:null}).then((function(e){e&&(200===e.statusCode?(i.c.success(s.formatMessage({id:"actionSuccess"},{action:s.formatMessage({id:"update"})})),setTimeout((function(){_.push("/pages/station")}),1e3)):i.c.warn(s.formatMessage({id:"actionFailed"},{action:s.formatMessage({id:"update"})})))}))}}else i.c.success(s.formatMessage({id:"actionSuccess"},{action:s.formatMessage({id:"update"})})),setTimeout((function(){_.push("/pages/station")}),1e3)}(Object(n.a)({},e))})),children:[Object(P.jsxs)(h.a,{row:!0,children:[Object(P.jsx)(b.a,{sm:"3",for:"smsUrl",children:"SMS Enable"}),Object(P.jsx)(j.a,{sm:"9",children:Object(P.jsx)(C.a,{checked:1===E,onChange:function(e){var t;t=e.target.checked?1:0,o.a.send({method:"POST",path:"Stations/updateById",data:{id:a.stationsId,data:{stationEnableUseSMS:t}},query:null}).then((function(e){e&&(200===e.statusCode?R(t):i.c.warn(s.formatMessage({id:"actionFailed"},{action:s.formatMessage({id:"update"})})))}))}})})]}),Object(P.jsxs)(h.a,{row:!0,children:[Object(P.jsx)(b.a,{sm:"3",for:"smsProvider",children:s.formatMessage({id:"supplier"},{type:"SMS"})}),Object(P.jsx)(j.a,{sm:"5",children:Object(P.jsxs)(f.a,{className:"w-100",id:"smsProvider",type:"select",invalid:K.smsProvider&&!0,innerRef:H({required:!0}),name:"smsProvider",bsSize:"sm",value:Q,onChange:function(e){var s=e.target.value;A(y),W(s)},disabled:1!==E,children:[Object(P.jsx)("option",{value:"",children:s.formatMessage({id:"selectService"})}),Object(P.jsx)("option",{value:"VIETTEL",children:"Viettel"}),Object(P.jsx)("option",{value:"VIVAS",children:"Vivas"})]})}),Object(P.jsx)(j.a,{sm:"4"})]}),Object(P.jsxs)("div",{className:"row",children:[Object(P.jsx)(b.a,{sm:"3",children:s.formatMessage({id:"stationUseCustomSMSBrand"},{type:"SMS Brandname"})}),Object(P.jsx)(j.a,{sm:"9",children:Object(P.jsx)(C.a,{checked:1===B,onChange:function(e){var t;t=e.target.checked?1:0,o.a.send({method:"POST",path:"Stations/updateCustomSMSBrand",data:{stationsId:a.stationsId,stationUseCustomSMSBrand:t},query:null}).then((function(e){e&&(200===e.statusCode?T(t):i.c.warn(s.formatMessage({id:"actionFailed"},{action:s.formatMessage({id:"update"})})))}))},disabled:1!==E})})]}),Object(P.jsxs)(h.a,{row:!0,className:"mt-1",children:[Object(P.jsx)(b.a,{sm:"3",for:"smsUrl",children:"SMS Url"}),Object(P.jsx)(j.a,{sm:"5",children:Object(P.jsx)(f.a,{id:"smsUrl",name:"smsUrl",disabled:1!==B||1!==E,innerRef:H({required:1===B&&1===E}),invalid:K.smsUrl&&!0,placeholder:"SMS Url",value:y&&y.smsUrl||"",onChange:function(e){var s=e.target,a=s.name,t=s.value;Y(a,t)}})}),Object(P.jsx)(j.a,{sm:"4",children:Object(P.jsx)("i",{children:"V\xed d\u1ee5: https://example.vn/SMS"})})]}),Object(P.jsxs)(h.a,{row:!0,children:[Object(P.jsx)(b.a,{sm:"3",for:"smsUserName",children:s.formatMessage({id:"smsUsername"},{type:"SMS"})}),Object(P.jsx)(j.a,{sm:"5",children:Object(P.jsx)(f.a,{id:"smsUserName",name:"smsUserName",disabled:1!==B||1!==E,innerRef:H({required:1===B&&1===E}),invalid:K.smsUserName&&!0,placeholder:s.formatMessage({id:"smsUsername"},{type:"SMS"}),value:y&&y.smsUserName||"",onChange:function(e){var s=e.target,a=s.name,t=s.value;Y(a,t)}})}),Object(P.jsx)(j.a,{sm:"4",children:Object(P.jsx)("i",{children:"V\xed d\u1ee5: example123"})})]}),Object(P.jsxs)(h.a,{row:!0,children:[Object(P.jsx)(b.a,{sm:"3",for:"smsPassword",children:s.formatMessage({id:"smsPassword"},{type:"SMS"})}),Object(P.jsx)(j.a,{sm:"5",children:Object(P.jsx)(f.a,{name:"smsPassword",id:"smsPassword",disabled:1!==B||1!==E,innerRef:H({required:1===B&&1===E}),invalid:K.smsPassword&&!0,value:y&&y.smsPassword||"",placeholder:s.formatMessage({id:"smsPassword"},{type:"SMS"}),onChange:function(e){var s=e.target,a=s.name,t=s.value;Y(a,t)}})}),Object(P.jsx)(j.a,{sm:"4",children:Object(P.jsx)("i",{children:"V\xed d\u1ee5: ...abc123"})})]}),"VIVAS"===Q&&Object(P.jsxs)(h.a,{row:!0,children:[Object(P.jsx)(b.a,{sm:"3",for:"smsBrand",children:s.formatMessage({id:"smsBrand"})}),Object(P.jsx)(j.a,{sm:"5",children:Object(P.jsx)(f.a,{name:"smsBrand",id:"smsBrand",disabled:1!==B||1!==E,innerRef:H({required:1===B&&1===E}),invalid:K.smsBrand&&!0,value:y&&y.smsBrand||"",placeholder:s.formatMessage({id:"smsBrand"}),onChange:function(e){var s=e.target,a=s.name,t=s.value;Y(a,t)}})}),Object(P.jsx)(j.a,{sm:"4",children:Object(P.jsx)("i",{children:"V\xed d\u1ee5: KiemDinhOto"})})]}),"VIETTEL"===Q&&Object(P.jsxs)(h.a,{row:!0,children:[Object(P.jsx)(b.a,{sm:"3",for:"smsCPCode",children:s.formatMessage({id:"smsCPCode"})}),Object(P.jsx)(j.a,{sm:"5",children:Object(P.jsx)(f.a,{name:"smsCPCode",id:"smsCPCode",disabled:1!==B||1!==E,innerRef:H({required:1===B&&1===E}),invalid:K.smsCPCode&&!0,value:y&&y.smsCPCode||"",placeholder:s.formatMessage({id:"smsCPCode"}),onChange:function(e){var s=e.target,a=s.name,t=s.value;Y(a,t)}})}),Object(P.jsx)(j.a,{sm:"4",children:Object(P.jsx)("i",{children:"V\xed d\u1ee5: abc-123"})})]}),"VIETTEL"===Q&&Object(P.jsxs)(h.a,{row:!0,children:[Object(P.jsx)(b.a,{sm:"3",for:"smsServiceId",children:s.formatMessage({id:"smsServiceId"})}),Object(P.jsx)(j.a,{sm:"5",children:Object(P.jsx)(f.a,{name:"smsServiceId",id:"smsServiceId",disabled:1!==B||1!==E,innerRef:H({required:1===B&&1===E}),invalid:K.smsServiceId&&!0,value:y&&y.smsServiceId||"",placeholder:s.formatMessage({id:"smsServiceId"}),onChange:function(e){var s=e.target,a=s.name,t=s.value;Y(a,t)}})}),Object(P.jsx)(j.a,{sm:"4",children:Object(P.jsx)("i",{children:"V\xed d\u1ee5: ...abc123"})})]}),Object(P.jsxs)("div",{className:"row m-0 mt-3",children:[Object(P.jsx)(h.a,{className:"p-0 col-12 col-sm-3",children:Object(P.jsx)(O.a.Ripple,{className:"w-100",color:"primary",type:"submit",children:s.formatMessage({id:"submit"})})}),Object(P.jsx)("div",{className:"col-1"}),Object(P.jsx)(h.a,{className:"col-12 col-sm-3 p-0",children:Object(P.jsx)(O.a.Ripple,{className:"w-100",color:"primary",disabled:1!==E,onClick:function(){return D(!0)},children:"Test SMS"})})]})]})})})]})]}),Object(P.jsx)(S.a,{isOpen:L,toggle:function(){return D(!L)},children:Object(P.jsxs)(u.a,{onSubmit:function(e){e.preventDefault();var a=document.getElementById("testSMS");a.value&&function(e){if("VIETTEL"===Q){var a={phoneNumber:e,smsConfig:{smsUrl:y.smsUrl,smsUserName:y.smsUserName,smsPassword:y.smsPassword,smsCPCode:y.smsCPCode,smsServiceId:y.smsServiceId,smsProvider:Q}};o.a.send({method:"POST",path:"CustomerMessage/sendTestSMS",data:a}).then((function(e){e&&200===e.statusCode?(i.c.success(s.formatMessage({id:"sent"},{type:""})),D(!1)):i.c.error(s.formatMessage({id:"sendSMSTestFailed"},{type:""}))}))}else{var t={phoneNumber:e,smsConfig:{smsUrl:y.smsUrl,smsUserName:y.smsUserName,smsPassword:y.smsPassword,smsBrand:y.smsBrand,smsProvider:Q}};o.a.send({method:"POST",path:"CustomerMessage/sendTestSMS",data:t}).then((function(e){e&&200===e.statusCode?(i.c.success(s.formatMessage({id:"sent"},{type:""})),D(!1)):i.c.error(s.formatMessage({id:"sendSMSTestFailed"},{type:""}))}))}}(a.value)},children:[Object(P.jsx)(v.a,{toggle:function(){return D(!L)},children:s.formatMessage({id:"checkSMS"})}),Object(P.jsxs)(g.a,{children:[Object(P.jsx)("label",{htmlFor:"testSMS",children:s.formatMessage({id:"enterPhoneSendSMS"})}),Object(P.jsx)(h.a,{children:Object(P.jsx)(f.a,{name:"testSMS",id:"testSMS",placeholder:"Nh\u1eadp S\u0110T",type:"SMS",required:!0})})]}),Object(P.jsx)(x.a,{children:Object(P.jsx)(h.a,{children:Object(P.jsx)(O.a,{color:"primary",type:"submit",children:s.formatMessage({id:"send"})})})})]})})]})};s.default=Object(M.c)(Object(c.memo)(U))}}]);
//# sourceMappingURL=21.fc6d69b5.chunk.js.map