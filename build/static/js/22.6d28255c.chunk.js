(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[22],{452:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return i}));var s=a(460),n=a.n(s),r=function(e){var t=n.a.stringify(e);return t?"?".concat(t):""};function c(e,t,a){var s=new Image;s.crossOrigin="Anonymous",s.onload=function(){var e,s=document.createElement("CANVAS"),n=s.getContext("2d");s.height=this.naturalHeight,s.width=this.naturalWidth,n.drawImage(this,0,0),e=s.toDataURL(a),t(e)},s.src=e,(s.complete||void 0===s.complete)&&(s.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",s.src=e)}function i(e){return new Promise((function(t,a){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){return t(s.result)},s.onerror=a}))}},453:function(e,t,a){"use strict";var s=a(78),n=a.n(s),r="https://cdn-dev.kiemdinhoto.vn/",c=a(116),i=a(452);t.a={send:function(e){var t=e.method,a=void 0===t?"get":t,s=e.path,o=e.data,u=void 0===o?null:o,j=e.query,l=void 0===j?null:j,d=e.headers,m=void 0===d?{}:d,f=e.newUrl;return new Promise((function(e){var t=r+"".concat(s).concat(Object(i.b)(l));f&&(t="".concat(f).concat(Object(i.b)(l)));var o=window.localStorage.getItem("accessToken");if(o){var j=o.replace(/"/g,"");m.Authorization="Bearer ".concat(j)}n()({method:a,url:t,data:u,headers:m}).then((function(t){var a=t.data;return e(a)})).catch((function(t){var a=t.response,s=void 0===a?{}:a,n=s.data?s.data:null;if(n){var r=n.statusCode,i=n.message;if(505===r)c.c.warn("Unauthorized");else if(413===r&&"Payload content length greater than maximum allowed: 10485760"===i)c.c.warn("Image too large");else if(401===r&&"Expired token received for JSON Web Token validation"===i)window.localStorage.clear(),window.location.href="/";else{if(!(401===r&&"Unauthorized"===i||403===r&&"InvalidToken"===i))return e(n.data);window.localStorage.clear(),window.location.href="/"}}else c.c.warn("Error from server")}))}))}}},458:function(e,t,a){},940:function(e,t,a){},941:function(e,t,a){var s={"./af":667,"./af.js":667,"./ar":668,"./ar-dz":669,"./ar-dz.js":669,"./ar-kw":670,"./ar-kw.js":670,"./ar-ly":671,"./ar-ly.js":671,"./ar-ma":672,"./ar-ma.js":672,"./ar-sa":673,"./ar-sa.js":673,"./ar-tn":674,"./ar-tn.js":674,"./ar.js":668,"./az":675,"./az.js":675,"./be":676,"./be.js":676,"./bg":677,"./bg.js":677,"./bm":678,"./bm.js":678,"./bn":679,"./bn-bd":680,"./bn-bd.js":680,"./bn.js":679,"./bo":681,"./bo.js":681,"./br":682,"./br.js":682,"./bs":683,"./bs.js":683,"./ca":684,"./ca.js":684,"./cs":685,"./cs.js":685,"./cv":686,"./cv.js":686,"./cy":687,"./cy.js":687,"./da":688,"./da.js":688,"./de":689,"./de-at":690,"./de-at.js":690,"./de-ch":691,"./de-ch.js":691,"./de.js":689,"./dv":692,"./dv.js":692,"./el":693,"./el.js":693,"./en-au":694,"./en-au.js":694,"./en-ca":695,"./en-ca.js":695,"./en-gb":696,"./en-gb.js":696,"./en-ie":697,"./en-ie.js":697,"./en-il":698,"./en-il.js":698,"./en-in":699,"./en-in.js":699,"./en-nz":700,"./en-nz.js":700,"./en-sg":701,"./en-sg.js":701,"./eo":702,"./eo.js":702,"./es":703,"./es-do":704,"./es-do.js":704,"./es-mx":705,"./es-mx.js":705,"./es-us":706,"./es-us.js":706,"./es.js":703,"./et":707,"./et.js":707,"./eu":708,"./eu.js":708,"./fa":709,"./fa.js":709,"./fi":710,"./fi.js":710,"./fil":711,"./fil.js":711,"./fo":712,"./fo.js":712,"./fr":713,"./fr-ca":714,"./fr-ca.js":714,"./fr-ch":715,"./fr-ch.js":715,"./fr.js":713,"./fy":716,"./fy.js":716,"./ga":717,"./ga.js":717,"./gd":718,"./gd.js":718,"./gl":719,"./gl.js":719,"./gom-deva":720,"./gom-deva.js":720,"./gom-latn":721,"./gom-latn.js":721,"./gu":722,"./gu.js":722,"./he":723,"./he.js":723,"./hi":724,"./hi.js":724,"./hr":725,"./hr.js":725,"./hu":726,"./hu.js":726,"./hy-am":727,"./hy-am.js":727,"./id":728,"./id.js":728,"./is":729,"./is.js":729,"./it":730,"./it-ch":731,"./it-ch.js":731,"./it.js":730,"./ja":732,"./ja.js":732,"./jv":733,"./jv.js":733,"./ka":734,"./ka.js":734,"./kk":735,"./kk.js":735,"./km":736,"./km.js":736,"./kn":737,"./kn.js":737,"./ko":738,"./ko.js":738,"./ku":739,"./ku.js":739,"./ky":740,"./ky.js":740,"./lb":741,"./lb.js":741,"./lo":742,"./lo.js":742,"./lt":743,"./lt.js":743,"./lv":744,"./lv.js":744,"./me":745,"./me.js":745,"./mi":746,"./mi.js":746,"./mk":747,"./mk.js":747,"./ml":748,"./ml.js":748,"./mn":749,"./mn.js":749,"./mr":750,"./mr.js":750,"./ms":751,"./ms-my":752,"./ms-my.js":752,"./ms.js":751,"./mt":753,"./mt.js":753,"./my":754,"./my.js":754,"./nb":755,"./nb.js":755,"./ne":756,"./ne.js":756,"./nl":757,"./nl-be":758,"./nl-be.js":758,"./nl.js":757,"./nn":759,"./nn.js":759,"./oc-lnc":760,"./oc-lnc.js":760,"./pa-in":761,"./pa-in.js":761,"./pl":762,"./pl.js":762,"./pt":763,"./pt-br":764,"./pt-br.js":764,"./pt.js":763,"./ro":765,"./ro.js":765,"./ru":766,"./ru.js":766,"./sd":767,"./sd.js":767,"./se":768,"./se.js":768,"./si":769,"./si.js":769,"./sk":770,"./sk.js":770,"./sl":771,"./sl.js":771,"./sq":772,"./sq.js":772,"./sr":773,"./sr-cyrl":774,"./sr-cyrl.js":774,"./sr.js":773,"./ss":775,"./ss.js":775,"./sv":776,"./sv.js":776,"./sw":777,"./sw.js":777,"./ta":778,"./ta.js":778,"./te":779,"./te.js":779,"./tet":780,"./tet.js":780,"./tg":781,"./tg.js":781,"./th":782,"./th.js":782,"./tk":783,"./tk.js":783,"./tl-ph":784,"./tl-ph.js":784,"./tlh":785,"./tlh.js":785,"./tr":786,"./tr.js":786,"./tzl":787,"./tzl.js":787,"./tzm":788,"./tzm-latn":789,"./tzm-latn.js":789,"./tzm.js":788,"./ug-cn":790,"./ug-cn.js":790,"./uk":791,"./uk.js":791,"./ur":792,"./ur.js":792,"./uz":793,"./uz-latn":794,"./uz-latn.js":794,"./uz.js":793,"./vi":601,"./vi.js":601,"./x-pseudo":795,"./x-pseudo.js":795,"./yo":796,"./yo.js":796,"./zh-cn":797,"./zh-cn.js":797,"./zh-hk":798,"./zh-hk.js":798,"./zh-mo":799,"./zh-mo.js":799,"./zh-tw":800,"./zh-tw.js":800};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=941},980:function(e,t,a){"use strict";a.r(t);var s=a(512),n=a.n(s),r=a(30),c=a(1),i=a(513),o=a(16),u=a(0),j=a(475),l=a.n(j),d=a(656),m=a(628),f=a(655),h=a(636),v=a(665),b=a(540),p=a(541),g=a(664),O=(a(940),a(458),a(474)),k=a.n(O),x=a(123),y=a(124),w=a(453),A=function(){function e(){Object(x.a)(this,e)}return Object(y.a)(e,null,[{key:"getList",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",new Promise((function(e){w.a.send({method:"POST",path:"AppDevices/find",data:t}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.statusCode,s=t.data;if(200===a){for(var n=0;n<s.data.length;n++)s.data[n]&&(s.data[n].key=s.data.length-n);return e(s)}return e({})}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateDevice",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",new Promise((function(e){w.a.send({method:"POST",path:"AppDevices/UpdateById",data:t}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.statusCode;return e(200===a?{isSuccess:!0}:{isSuccess:!1})}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteDeviceById",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){w.a.send({method:"POST",path:"AppDevices/deleteById",data:{id:t}}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.statusCode;return e(200===a?{isSuccess:!0}:{isSuccess:!1})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),S=a(465),z=a.n(S),N=a(116),C=(a(601),a(467)),M=a.n(C),D=a(126),L=a(6),P={filter:{},skip:0,limit:20,order:{key:"createdAt",value:"desc"}},I=["locked","ok"];function T(e){var t,a,s=e.intl,j=Object(u.useState)(!1),O=Object(o.a)(j,2),x=O[0],y=O[1],w=Object(u.useState)(P),S=Object(o.a)(w,2),C=S[0],D=S[1],T=Object(u.useState)(1),U=Object(o.a)(T,2),E=U[0],F=U[1],B=Object(u.useState)({data:[],total:0}),R=Object(o.a)(B,2),Y=R[0],q=R[1],J=Object(u.useState)(""),W=Object(o.a)(J,2),_=W[0],H=W[1],Q=Object(u.useState)("ALL"),V=Object(o.a)(Q,2),G=V[0],K=V[1];function X(){return(X=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.deleteDeviceById(t.appDeviceId).then((function(e){var t={action:s.formatMessage({id:"delete"})};e&&e.isSuccess?(N.c.success(s.formatMessage({id:"actionSuccess"},t)),ee(C,!0)):N.c.error(s.formatMessage({id:"actionFailed"},t))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){A.updateDevice({id:e.appDeviceId,data:{deviceStatus:0===e.deviceStatus?1:0}}).then((function(e){var t={action:s.formatMessage({id:"update"})};e.isSuccess?(N.c.success(s.formatMessage({id:"actionSuccess"},t)),ee(C,!0)):N.c.error(s.formatMessage({id:"actionFailed"},t))}))}var $=[{name:s.formatMessage({id:"index"}),selector:function(e){return e.key},sortable:!0,maxWidth:"60px"},{name:s.formatMessage({id:"deviceName"}),selector:function(e){return e.devicePrettyProductName}},{name:s.formatMessage({id:"stations"}),cell:function(e){var t=e.stationUrl,a=e.stationsName;return Object(L.jsx)("div",{className:"text-link pointer",onClick:function(){return window.open("https://".concat(t),"_blank")},children:a})}},{name:s.formatMessage({id:"status"}),cell:function(e){return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:s.formatMessage({id:I[Number(e.deviceStatus)]})})})}},{name:s.formatMessage({id:"createdAt"}),cell:function(e){var t=e.createdAt;return Object(L.jsx)("div",{children:M()(t).locale("vi").format("hh:mm DD/MM/YYYY")})}},{name:s.formatMessage({id:"deviceOS"}),selector:function(e){return e.deviceOSName}},{name:"",cell:function(e){return Object(L.jsxs)(L.Fragment,{children:[0===e.deviceStatus?Object(L.jsx)(d.a,{size:20,onClick:function(){return Z(e)},className:"mr-2 pointer"}):Object(L.jsx)(m.a,{size:20,onClick:function(){return Z(e)},className:"mr-2 pointer"}),Object(L.jsx)(f.a,{size:20,onClick:function(){return function(e){return X.apply(this,arguments)}(e)},className:"pointer"})]})}}],ee=function(e,t){t||y(!0),Object.keys(e.filter).forEach((function(t){e.filter[t]&&""!==e.filter[t]||delete e.filter[t]})),A.getList(e).then((function(a){D(e),a&&!z.a.isEmpty(a)?q(a):(N.c.warn("C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ngt th\u1eed l\u1ea1i sau!"),q({total:0,data:[]})),t||y(!1)}))};Object(u.useEffect)((function(){ee(C)}),[]);var te=function(e,t){var a=Object(c.a)(Object(c.a)({},C),{},{filter:Object(c.a)(Object(c.a)(Object(c.a)({},C.filter),t),{},{deviceStatus:t.deviceStatus}),searchText:e||void 0,skip:0});ee(a,!0)};return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(v.a,{children:[Object(L.jsxs)(b.a,{className:"mx-0 mt-1 mb-50",children:[Object(L.jsx)(p.a,{sm:"4",children:Object(L.jsx)("div",{className:"d-flex align-items-center",children:Object(L.jsx)(g.a,(t={className:"dataTable-select",value:_,name:"searchText",bsSize:"sm",placeholder:s.formatMessage({id:"Search"})},Object(r.a)(t,"className","w-75 ml-2"),Object(r.a)(t,"onChange",(function(e){H(e.target.value)})),Object(r.a)(t,"onKeyDown",(function(e){var t=e.target.value;13===e.keyCode&&te(t||void 0)})),t))})}),Object(L.jsx)(p.a,{sm:"4",children:Object(L.jsx)("div",{className:"d-flex align-items-center",children:Object(L.jsxs)(g.a,(a={className:"dataTable-select",name:"deviceStatus",bsSize:"sm",type:"select",placeholder:"L\u1ecdc tr\u1ea1ng th\xe1i"},Object(r.a)(a,"className","w-75 ml-2"),Object(r.a)(a,"id","sort-select"),Object(r.a)(a,"value",G),Object(r.a)(a,"onChange",(function(e){var t=e.target,a=t.name,s=t.value;K(s),te(void 0,"ALL"!==s?Object(r.a)({},a,s):Object(r.a)({},a,void 0))})),Object(r.a)(a,"children",[Object(L.jsx)("option",{value:"ALL",children:s.formatMessage({id:"all"})}),I.map((function(e,t){return Object(L.jsx)("option",{value:Number(t),children:s.formatMessage({id:e})},Math.random())}))]),a))})}),Object(L.jsx)(p.a,{sm:"4"})]}),Object(L.jsx)(l.a,{pagination:!0,noHeader:!0,paginationServer:!0,className:"react-dataTable",columns:$,sortIcon:Object(L.jsx)(h.a,{size:10}),paginationComponent:function(){var e=Number(Math.ceil(Y/20).toFixed(0));return Object(L.jsx)(k.a,{previousLabel:"",nextLabel:"",breakLabel:"...",pageCount:e||1,marginPagesDisplayed:2,pageRangeDisplayed:2,activeClassName:"active",forcePage:0!==E?E-1:0,onPageChange:function(e){return function(e){var t=Object(c.a)(Object(c.a)({},C),{},{skip:e.selected*C.limit});ee(t),F(e.selected+1)}(e)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:Y.data,progressPending:x})]})})}t.default=Object(D.c)(Object(u.memo)(T))}}]);
//# sourceMappingURL=22.6d28255c.chunk.js.map