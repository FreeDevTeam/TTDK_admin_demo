(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[22],{452:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return i}));var s=a(460),n=a.n(s),r=function(e){var t=n.a.stringify(e);return t?"?".concat(t):""};function c(e,t,a){var s=new Image;s.crossOrigin="Anonymous",s.onload=function(){var e,s=document.createElement("CANVAS"),n=s.getContext("2d");s.height=this.naturalHeight,s.width=this.naturalWidth,n.drawImage(this,0,0),e=s.toDataURL(a),t(e)},s.src=e,(s.complete||void 0===s.complete)&&(s.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",s.src=e)}function i(e){return new Promise((function(t,a){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){return t(s.result)},s.onerror=a}))}},453:function(e,t,a){"use strict";var s=a(78),n=a.n(s),r="https://cdn.kiemdinhoto.vn/",c=a(116),i=a(452);t.a={send:function(e){var t=e.method,a=void 0===t?"get":t,s=e.path,o=e.data,u=void 0===o?null:o,j=e.query,l=void 0===j?null:j,d=e.headers,m=void 0===d?{}:d,f=e.newUrl;return new Promise((function(e){var t=r+"".concat(s).concat(Object(i.b)(l));f&&(t="".concat(f).concat(Object(i.b)(l)));var o=window.localStorage.getItem("accessToken");if(o){var j=o.replace(/"/g,"");m.Authorization="Bearer ".concat(j)}n()({method:a,url:t,data:u,headers:m}).then((function(t){var a=t.data;return e(a)})).catch((function(t){var a=t.response,s=void 0===a?{}:a,n=s.data?s.data:null;if(n){var r=n.statusCode,i=n.message;if(505===r)c.c.warn("Unauthorized");else if(413===r&&"Payload content length greater than maximum allowed: 1048576"===i)c.c.warn("Image too large");else if(401===r&&"Expired token received for JSON Web Token validation"===i)window.localStorage.clear(),window.location.href="/";else{if(!(401===r&&"Unauthorized"===i||403===r&&"InvalidToken"===i))return e(n.data);window.localStorage.clear(),window.location.href="/"}}else c.c.warn("Error from server")}))}))}}},458:function(e,t,a){},939:function(e,t,a){},940:function(e,t,a){var s={"./af":666,"./af.js":666,"./ar":667,"./ar-dz":668,"./ar-dz.js":668,"./ar-kw":669,"./ar-kw.js":669,"./ar-ly":670,"./ar-ly.js":670,"./ar-ma":671,"./ar-ma.js":671,"./ar-sa":672,"./ar-sa.js":672,"./ar-tn":673,"./ar-tn.js":673,"./ar.js":667,"./az":674,"./az.js":674,"./be":675,"./be.js":675,"./bg":676,"./bg.js":676,"./bm":677,"./bm.js":677,"./bn":678,"./bn-bd":679,"./bn-bd.js":679,"./bn.js":678,"./bo":680,"./bo.js":680,"./br":681,"./br.js":681,"./bs":682,"./bs.js":682,"./ca":683,"./ca.js":683,"./cs":684,"./cs.js":684,"./cv":685,"./cv.js":685,"./cy":686,"./cy.js":686,"./da":687,"./da.js":687,"./de":688,"./de-at":689,"./de-at.js":689,"./de-ch":690,"./de-ch.js":690,"./de.js":688,"./dv":691,"./dv.js":691,"./el":692,"./el.js":692,"./en-au":693,"./en-au.js":693,"./en-ca":694,"./en-ca.js":694,"./en-gb":695,"./en-gb.js":695,"./en-ie":696,"./en-ie.js":696,"./en-il":697,"./en-il.js":697,"./en-in":698,"./en-in.js":698,"./en-nz":699,"./en-nz.js":699,"./en-sg":700,"./en-sg.js":700,"./eo":701,"./eo.js":701,"./es":702,"./es-do":703,"./es-do.js":703,"./es-mx":704,"./es-mx.js":704,"./es-us":705,"./es-us.js":705,"./es.js":702,"./et":706,"./et.js":706,"./eu":707,"./eu.js":707,"./fa":708,"./fa.js":708,"./fi":709,"./fi.js":709,"./fil":710,"./fil.js":710,"./fo":711,"./fo.js":711,"./fr":712,"./fr-ca":713,"./fr-ca.js":713,"./fr-ch":714,"./fr-ch.js":714,"./fr.js":712,"./fy":715,"./fy.js":715,"./ga":716,"./ga.js":716,"./gd":717,"./gd.js":717,"./gl":718,"./gl.js":718,"./gom-deva":719,"./gom-deva.js":719,"./gom-latn":720,"./gom-latn.js":720,"./gu":721,"./gu.js":721,"./he":722,"./he.js":722,"./hi":723,"./hi.js":723,"./hr":724,"./hr.js":724,"./hu":725,"./hu.js":725,"./hy-am":726,"./hy-am.js":726,"./id":727,"./id.js":727,"./is":728,"./is.js":728,"./it":729,"./it-ch":730,"./it-ch.js":730,"./it.js":729,"./ja":731,"./ja.js":731,"./jv":732,"./jv.js":732,"./ka":733,"./ka.js":733,"./kk":734,"./kk.js":734,"./km":735,"./km.js":735,"./kn":736,"./kn.js":736,"./ko":737,"./ko.js":737,"./ku":738,"./ku.js":738,"./ky":739,"./ky.js":739,"./lb":740,"./lb.js":740,"./lo":741,"./lo.js":741,"./lt":742,"./lt.js":742,"./lv":743,"./lv.js":743,"./me":744,"./me.js":744,"./mi":745,"./mi.js":745,"./mk":746,"./mk.js":746,"./ml":747,"./ml.js":747,"./mn":748,"./mn.js":748,"./mr":749,"./mr.js":749,"./ms":750,"./ms-my":751,"./ms-my.js":751,"./ms.js":750,"./mt":752,"./mt.js":752,"./my":753,"./my.js":753,"./nb":754,"./nb.js":754,"./ne":755,"./ne.js":755,"./nl":756,"./nl-be":757,"./nl-be.js":757,"./nl.js":756,"./nn":758,"./nn.js":758,"./oc-lnc":759,"./oc-lnc.js":759,"./pa-in":760,"./pa-in.js":760,"./pl":761,"./pl.js":761,"./pt":762,"./pt-br":763,"./pt-br.js":763,"./pt.js":762,"./ro":764,"./ro.js":764,"./ru":765,"./ru.js":765,"./sd":766,"./sd.js":766,"./se":767,"./se.js":767,"./si":768,"./si.js":768,"./sk":769,"./sk.js":769,"./sl":770,"./sl.js":770,"./sq":771,"./sq.js":771,"./sr":772,"./sr-cyrl":773,"./sr-cyrl.js":773,"./sr.js":772,"./ss":774,"./ss.js":774,"./sv":775,"./sv.js":775,"./sw":776,"./sw.js":776,"./ta":777,"./ta.js":777,"./te":778,"./te.js":778,"./tet":779,"./tet.js":779,"./tg":780,"./tg.js":780,"./th":781,"./th.js":781,"./tk":782,"./tk.js":782,"./tl-ph":783,"./tl-ph.js":783,"./tlh":784,"./tlh.js":784,"./tr":785,"./tr.js":785,"./tzl":786,"./tzl.js":786,"./tzm":787,"./tzm-latn":788,"./tzm-latn.js":788,"./tzm.js":787,"./ug-cn":789,"./ug-cn.js":789,"./uk":790,"./uk.js":790,"./ur":791,"./ur.js":791,"./uz":792,"./uz-latn":793,"./uz-latn.js":793,"./uz.js":792,"./vi":601,"./vi.js":601,"./x-pseudo":794,"./x-pseudo.js":794,"./yo":795,"./yo.js":795,"./zh-cn":796,"./zh-cn.js":796,"./zh-hk":797,"./zh-hk.js":797,"./zh-mo":798,"./zh-mo.js":798,"./zh-tw":799,"./zh-tw.js":799};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=940},979:function(e,t,a){"use strict";a.r(t);var s=a(512),n=a.n(s),r=a(30),c=a(1),i=a(513),o=a(16),u=a(0),j=a(475),l=a.n(j),d=a(655),m=a(628),f=a(654),h=a(636),v=a(664),b=a(540),p=a(541),g=a(663),O=(a(939),a(458),a(474)),k=a.n(O),x=a(123),y=a(124),w=a(453),A=function(){function e(){Object(x.a)(this,e)}return Object(y.a)(e,null,[{key:"getList",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",new Promise((function(e){w.a.send({method:"POST",path:"AppDevices/find",data:t}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.statusCode,s=t.data;if(200===a){for(var n=0;n<s.data.length;n++)s.data[n]&&(s.data[n].key=s.data.length-n);return e(s)}return e({})}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateDevice",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",new Promise((function(e){w.a.send({method:"POST",path:"AppDevices/UpdateById",data:t}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.statusCode;return e(200===a?{isSuccess:!0}:{isSuccess:!1})}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteDeviceById",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){w.a.send({method:"POST",path:"AppDevices/deleteById",data:{id:t}}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.statusCode;return e(200===a?{isSuccess:!0}:{isSuccess:!1})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),S=a(465),z=a.n(S),N=a(116),C=(a(601),a(467)),M=a.n(C),D=a(126),L=a(6),P={filter:{},skip:0,limit:20,order:{key:"createdAt",value:"desc"}},I=["locked","ok"];function T(e){var t,a,s=e.intl,j=Object(u.useState)(!1),O=Object(o.a)(j,2),x=O[0],y=O[1],w=Object(u.useState)(P),S=Object(o.a)(w,2),C=S[0],D=S[1],T=Object(u.useState)(1),U=Object(o.a)(T,2),E=U[0],F=U[1],B=Object(u.useState)({data:[],total:0}),R=Object(o.a)(B,2),Y=R[0],q=R[1],J=Object(u.useState)(""),W=Object(o.a)(J,2),_=W[0],H=W[1],Q=Object(u.useState)("ALL"),V=Object(o.a)(Q,2),G=V[0],K=V[1];function X(){return(X=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.deleteDeviceById(t.appDeviceId).then((function(e){var t={action:s.formatMessage({id:"delete"})};e&&e.isSuccess?(N.c.success(s.formatMessage({id:"actionSuccess"},t)),ee(C,!0)):N.c.error(s.formatMessage({id:"actionFailed"},t))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){A.updateDevice({id:e.appDeviceId,data:{deviceStatus:0===e.deviceStatus?1:0}}).then((function(e){var t={action:s.formatMessage({id:"update"})};e.isSuccess?(N.c.success(s.formatMessage({id:"actionSuccess"},t)),ee(C,!0)):N.c.error(s.formatMessage({id:"actionFailed"},t))}))}var $=[{name:s.formatMessage({id:"index"}),selector:function(e){return e.key},sortable:!0,maxWidth:"60px"},{name:s.formatMessage({id:"deviceName"}),selector:function(e){return e.devicePrettyProductName}},{name:s.formatMessage({id:"stations"}),cell:function(e){var t=e.stationUrl,a=e.stationsName;return Object(L.jsx)("div",{className:"text-link pointer",onClick:function(){return window.open("https://".concat(t),"_blank")},children:a})}},{name:s.formatMessage({id:"status"}),cell:function(e){return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:s.formatMessage({id:I[Number(e.deviceStatus)]})})})}},{name:s.formatMessage({id:"createdAt"}),cell:function(e){var t=e.createdAt;return Object(L.jsx)("div",{children:M()(t).locale("vi").format("hh:mm DD/MM/YYYY")})}},{name:s.formatMessage({id:"deviceOS"}),selector:function(e){return e.deviceOSName}},{name:"",cell:function(e){return Object(L.jsxs)(L.Fragment,{children:[0===e.deviceStatus?Object(L.jsx)(d.a,{size:20,onClick:function(){return Z(e)},className:"mr-2 pointer"}):Object(L.jsx)(m.a,{size:20,onClick:function(){return Z(e)},className:"mr-2 pointer"}),Object(L.jsx)(f.a,{size:20,onClick:function(){return function(e){return X.apply(this,arguments)}(e)},className:"pointer"})]})}}],ee=function(e,t){t||y(!0),Object.keys(e.filter).forEach((function(t){e.filter[t]&&""!==e.filter[t]||delete e.filter[t]})),A.getList(e).then((function(a){D(e),a&&!z.a.isEmpty(a)?q(a):(N.c.warn("C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ngt th\u1eed l\u1ea1i sau!"),q({total:0,data:[]})),t||y(!1)}))};Object(u.useEffect)((function(){ee(C)}),[]);var te=function(e,t){var a=Object(c.a)(Object(c.a)({},C),{},{filter:Object(c.a)(Object(c.a)(Object(c.a)({},C.filter),t),{},{deviceStatus:t.deviceStatus}),searchText:e||void 0,skip:0});ee(a,!0)};return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(v.a,{children:[Object(L.jsxs)(b.a,{className:"mx-0 mt-1 mb-50",children:[Object(L.jsx)(p.a,{sm:"4",children:Object(L.jsx)("div",{className:"d-flex align-items-center",children:Object(L.jsx)(g.a,(t={className:"dataTable-select",value:_,name:"searchText",bsSize:"sm",placeholder:s.formatMessage({id:"Search"})},Object(r.a)(t,"className","w-75 ml-2"),Object(r.a)(t,"onChange",(function(e){H(e.target.value)})),Object(r.a)(t,"onKeyDown",(function(e){var t=e.target.value;13===e.keyCode&&te(t||void 0)})),t))})}),Object(L.jsx)(p.a,{sm:"4",children:Object(L.jsx)("div",{className:"d-flex align-items-center",children:Object(L.jsxs)(g.a,(a={className:"dataTable-select",name:"deviceStatus",bsSize:"sm",type:"select",placeholder:"L\u1ecdc tr\u1ea1ng th\xe1i"},Object(r.a)(a,"className","w-75 ml-2"),Object(r.a)(a,"id","sort-select"),Object(r.a)(a,"value",G),Object(r.a)(a,"onChange",(function(e){var t=e.target,a=t.name,s=t.value;K(s),te(void 0,"ALL"!==s?Object(r.a)({},a,s):Object(r.a)({},a,void 0))})),Object(r.a)(a,"children",[Object(L.jsx)("option",{value:"ALL",children:s.formatMessage({id:"all"})}),I.map((function(e,t){return Object(L.jsx)("option",{value:Number(t),children:s.formatMessage({id:e})},Math.random())}))]),a))})}),Object(L.jsx)(p.a,{sm:"4"})]}),Object(L.jsx)(l.a,{pagination:!0,noHeader:!0,paginationServer:!0,className:"react-dataTable",columns:$,sortIcon:Object(L.jsx)(h.a,{size:10}),paginationComponent:function(){var e=Number(Math.ceil(Y/20).toFixed(0));return Object(L.jsx)(k.a,{previousLabel:"",nextLabel:"",breakLabel:"...",pageCount:e||1,marginPagesDisplayed:2,pageRangeDisplayed:2,activeClassName:"active",forcePage:0!==E?E-1:0,onPageChange:function(e){return function(e){var t=Object(c.a)(Object(c.a)({},C),{},{skip:e.selected*C.limit});ee(t),F(e.selected+1)}(e)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:Y.data,progressPending:x})]})})}t.default=Object(D.c)(Object(u.memo)(T))}}]);
//# sourceMappingURL=22.723a00a1.chunk.js.map