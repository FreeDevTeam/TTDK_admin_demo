{"version":3,"sources":["helper/common.js","constants/url.js","services/request.js","views/pages/change-password/index.js"],"names":["getQueryString","query","result","queryString","stringify","toDataURL","src","callback","outputFormat","img","Image","crossOrigin","onload","dataURL","canvas","document","createElement","ctx","getContext","height","this","naturalHeight","width","naturalWidth","drawImage","complete","undefined","convertFileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onerror","HOST","process","send","method","path","data","headers","newUrl","url","token","window","localStorage","getItem","newToken","replace","Authorization","axios","then","catch","error","response","statusCode","message","toast","warn","clear","location","href","injectIntl","intl","useState","username","password","newPassword","userData","setUserData","useForm","register","errors","handleSubmit","className","onSubmit","isObjEmpty","Service","success","formatMessage","id","action","transition","Slide","autoClose","for","name","value","onChange","e","target","placeholder","classnames","innerRef","required","validate","type","Ripple","color","block"],"mappings":"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","file":"static/js/5.24be0b63.chunk.js","sourcesContent":["// @ts-nocheck\nimport queryString from 'query-string'\n\nexport const getQueryString = (query) => {\n  const result = queryString.stringify(\n    query,\n  )\n\n  if (!result) return ''\n  return `?${result}`\n}\n\nexport const debounced = (delay, fn) => {\n  let timerId\n\n  return (...args) => {\n    if (timerId) {\n      clearTimeout(timerId)\n    }\n\n    timerId = setTimeout(() => {\n      fn(...args)\n      timerId = null\n    }, delay)\n  }\n}\n\nexport const capitalizeFirstLetter = (stringText) => {\n  return stringText.charAt(0).toUpperCase() + stringText.slice(1)\n}\n\nexport const getParameterByName = (name, url) => {\n  if (!url) url = ''\n  // eslint-disable-next-line\n  name = name.replace(/[\\[\\]]/g, '\\\\$&')\n  let regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n    results = regex.exec(url)\n  if (!results) return null\n  if (!results[2]) return ''\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\n}\n\nexport const isEquivalent = (a, b) => {\n  // Create arrays of property names\n  let aProps = Object.getOwnPropertyNames(a)\n  let bProps = Object.getOwnPropertyNames(b)\n  // If number of properties is different,\n  // objects are not equivalent\n  if (aProps.length !== bProps.length) {\n    return false\n  }\n  for (let i = 0; i < aProps.length; i++) {\n    let propName = aProps[i]\n    // If values of same property are not equal,\n    // objects are not equivalent\n    if (a[propName] !== b[propName]) {\n      return false\n    }\n  }\n  // If we made it this far, objects\n  // are considered equivalent\n  return true\n}\n\nexport const xoa_dau = (str) => {\n  str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, \"a\");\n  str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, \"e\");\n  str = str.replace(/ì|í|ị|ỉ|ĩ/g, \"i\");\n  str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, \"o\");\n  str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, \"u\");\n  str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, \"y\");\n  str = str.replace(/đ/g, \"d\");\n  str = str.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g, \"A\");\n  str = str.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g, \"E\");\n  str = str.replace(/Ì|Í|Ị|Ỉ|Ĩ/g, \"I\");\n  str = str.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g, \"O\");\n  str = str.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g, \"U\");\n  str = str.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g, \"Y\");\n  str = str.replace(/Đ/g, \"D\");\n  return str;\n}\n\nexport const number_to_price = (v) => {\n\n  if (v === 0) { return '0'; }\n\n  if (!v || v === \"\") {\n    return v\n  }\n  v = v.toString();\n\n  v = v.replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1.\");\n\n  v = v.split(',').join('*').split('.').join(',').split('*').join('.');\n  return v;\n}\n\nexport const price_to_number = (v) => {\n  if (!v) { return 0; }\n  v = v.split(',').join('');\n  v = v.split('.').join(',');\n\n  return Number(v);\n}\n\nexport function validateEmail(email) {\n  // eslint-disable-next-line\n  const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(email);\n}\n\nexport function validatePass(pass) {\n  const passw = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,20}$/;\n  return passw.test(pass);\n}\n\nexport function validateNumberPhone(number) {\n  let c1 = number.substring(0, 4);\n  if (c1 === \"+855\") {\n    return true;\n  }\n  c1 = number.substring(0, 3);\n  return c1 === \"+60\" || c1 === \"+84\";\n}\n\nexport function toDataURL(src, callback, outputFormat) {\n  var img = new Image();\n  img.crossOrigin = 'Anonymous';\n  img.onload = function () {\n    var canvas = document.createElement('CANVAS');\n    var ctx = canvas.getContext('2d');\n    var dataURL;\n    canvas.height = this.naturalHeight;\n    canvas.width = this.naturalWidth;\n    ctx.drawImage(this, 0, 0);\n    dataURL = canvas.toDataURL(outputFormat);\n    callback(dataURL);\n  };\n  img.src = src;\n  if (img.complete || img.complete === undefined) {\n    img.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\n    img.src = src;\n  }\n}\n\nexport function convertFileToBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = reject;\n  });\n}\n\n\nconst _cutNumber = (number) => {\n  const num = number.toString()\n  if(num.length > 3) {\n    let count = 0\n    let arr = []\n    for(let i = num.length - 1; i >= 0; i--) {\n      count++\n      if(count === 3) {\n        const str = num[i] + num[i+1] + num[i+2]\n        arr.push(str)\n        count = 0;\n      }\n      if(i === 0) {\n        if(count === 2) {\n          const str = num[i] + num[i+1]\n          arr.push(str)\n        } else if(count === 1) {\n          const str = num[i]\n          arr.push(str)\n        } else {\n          break;\n        }\n      }\n    }\n    console.log(arr)\n    return arr.reverse().join(',')\n  } else {\n    return num;\n  }\n}\n\nexport function formatDot(number) {\n  if (!number) {\n    return ''\n  }\n  return _cutNumber(number)\n}\n\nexport function formatVND(number) {\n  if (!number) {\n    return ''\n  }\n  if (typeof number === 'number') {\n    return _cutNumber(number)\n  }\n\n  if(typeof number === 'string') {\n    let arrValue = number.split('.')\n    let formatedValue = _cutNumber(arrValue[0]);\n    return `${formatedValue}.${arrValue[1]}`;\n  }\n}","export const HOST = process.env.REACT_APP_API_URL || \"https://cdn-dev.kiemdinhoto.vn/\"\n\nexport const IMAGE_HOST = HOST + 'upload/'","// @ts-nocheck\nimport axios from 'axios'\nimport { HOST } from './../constants/url'\nimport { toast } from 'react-toastify';\nimport {\n  getQueryString,\n} from '../helper/common'\n\nfunction send({\n  method = 'get', path, data = null, query = null, headers = {}, newUrl\n}) {\n  return new Promise((resolve) => {\n    let url = HOST + `${path}${getQueryString(query)}`\n    if (newUrl) {\n      url = `${newUrl}${getQueryString(query)}`\n    }\n    let token = window.localStorage.getItem('accessToken')\n    \n    if (token) {\n      const newToken = token.replace(/\"/g, \"\");\n      headers.Authorization =`Bearer ${newToken}`\n    }\n    axios({\n      method, url, data, headers,\n    })\n      .then((result) => {\n        const data = result.data\n        return resolve(data)\n      })\n      .catch((error) => {\n        const {response ={}} = error\n        \n        const result = response.data ? response.data :null\n         \n        if (!result) {\n          toast.warn(\"Error from server\")\n        }\n        else {\n          const { statusCode, message: data } = result\n          if(statusCode === 505){\n            toast.warn(\"Unauthorized\")\n          }\n          else if (\n            (statusCode === 413 && data === 'Payload content length greater than maximum allowed: 10485760')) {\n            toast.warn(\"Image too large\")\n          }\n         else if (statusCode === 401 && data === 'Expired token received for JSON Web Token validation') {\n            window.localStorage.clear()\n            window.location.href = '/'\n           \n          }\n          else if (\n            (statusCode === 401 && data === 'Unauthorized') || (statusCode === 403 && data === 'InvalidToken')) {\n              window.localStorage.clear()\n              window.location.href = '/'\n            \n          } else {\n            return resolve(result.data)\n          }\n        }\n      })\n  })\n}\n\nexport default {\n  send,\n}\n","import React, { useState } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { \n  Form,\n  Button,\n  Input,\n  FormGroup,\n  Label\n} from 'reactstrap'\nimport { isObjEmpty } from '@utils'\nimport Service from './../../../services/request'\nimport { toast, Slide } from 'react-toastify'\nimport './changePassword.scss'\nimport classnames from 'classnames'\nimport { injectIntl } from 'react-intl';\n\nfunction ChangePassword({ intl }) {\n  const [userData, setUserData] = useState({\n    username: '',\n    password: '',\n    newPassword: ''\n  })\n\n  const { username, password, newPassword } = userData\n  \n  const { register, errors, handleSubmit } = useForm()\n\n  const onSubmit = data => {\n    if (isObjEmpty(errors)) {\n      Service.send({ method: 'post', path: 'Staff/changePasswordStaff', data }).then(result => {\n        if (result) {\n          const { statusCode } = result\n          if (statusCode === 200) {\n            toast.success(\n              intl.formatMessage({id: \"actionSuccess\"}, { action: intl.formatMessage({id: \"changePass\"})}),\n              { transition: Slide, autoClose: 2000 }\n            )\n          }\n        } else {\n            toast.error(\n              intl.formatMessage({id: \"actionFailed\"}, { action: intl.formatMessage({id: \"changePass\"})})\n            )\n        }\n      })\n    }\n  }\n\n  return (\n    <main className=\"change_password d-flex justify-content-center\">\n      <div className=\"change_password__container\">\n        <Form onSubmit={handleSubmit(onSubmit)}>\n          <FormGroup>\n            <Label for=\"username\">\n              {intl.formatMessage({ id:'username' })}\n            </Label>\n            <Input\n              name=\"username\"\n              id=\"username\"\n              value={username}\n              onChange={e => setUserData({...userData, username: e.target.value})}\n              placeholder={intl.formatMessage({ id:'username' })}\n              className={classnames({ 'is-invalid': errors['username'] })}\n              innerRef={register({ required: true, validate: value => value !== '' })}\n            />\n          </FormGroup>\n\n          <FormGroup>\n            <Label for=\"password\">\n              {intl.formatMessage({ id:'password' })}\n            </Label>\n            <Input\n              name=\"password\"\n              id=\"password\"\n              type=\"password\"\n              value={password}\n              placeholder={intl.formatMessage({ id:'password' })}\n              onChange={e => setUserData({...userData, password: e.target.value})}\n              className={classnames({ 'is-invalid': errors['password'] })}\n              innerRef={register({ required: true, validate: value => value !== '' })}\n            />\n          </FormGroup>\n\n          <FormGroup>\n            <Label for=\"newPassword\">\n              {intl.formatMessage({ id:'newPassword' })}\n            </Label>\n            <Input\n              name=\"newPassword\"\n              id=\"newPassword\"\n              type=\"password\"\n              placeholder={intl.formatMessage({ id:'newPassword' })}\n              value={newPassword}\n              onChange={e => setUserData({...userData, newPassword: e.target.value})}\n              className={classnames({ 'is-invalid': errors['newPassword'] })}\n              innerRef={register({ required: true, validate: value => value !== '' })}\n            />\n          </FormGroup>\n          <Button.Ripple type='submit' color='primary' block>\n            {intl.formatMessage({ id:'submit' })}\n          </Button.Ripple>\n        </Form>\n      </div>\n    </main>\n  )\n}\nexport default injectIntl(ChangePassword)"],"sourceRoot":""}