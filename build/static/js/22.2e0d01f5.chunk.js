(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[22],{452:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return i}));var s=a(460),n=a.n(s),r=function(e){var t=n.a.stringify(e);return t?"?".concat(t):""};function c(e,t,a){var s=new Image;s.crossOrigin="Anonymous",s.onload=function(){var e,s=document.createElement("CANVAS"),n=s.getContext("2d");s.height=this.naturalHeight,s.width=this.naturalWidth,n.drawImage(this,0,0),e=s.toDataURL(a),t(e)},s.src=e,(s.complete||void 0===s.complete)&&(s.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",s.src=e)}function i(e){return new Promise((function(t,a){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){return t(s.result)},s.onerror=a}))}},453:function(e,t,a){"use strict";var s=a(78),n=a.n(s),r="https://cdn.kiemdinhoto.vn/",c=a(116),i=a(452);t.a={send:function(e){var t=e.method,a=void 0===t?"get":t,s=e.path,o=e.data,u=void 0===o?null:o,j=e.query,l=void 0===j?null:j,d=e.headers,m=void 0===d?{}:d,f=e.newUrl;return new Promise((function(e){var t=r+"".concat(s).concat(Object(i.b)(l));f&&(t="".concat(f).concat(Object(i.b)(l)));var o=window.localStorage.getItem("accessToken");if(o){var j=o.replace(/"/g,"");m.Authorization="Bearer ".concat(j)}n()({method:a,url:t,data:u,headers:m}).then((function(t){var a=t.data;return e(a)})).catch((function(t){var a=t.response,s=void 0===a?{}:a,n=s.data?s.data:null;if(n){var r=n.statusCode,i=n.message;if(505===r)c.c.warn("Unauthorized");else if(401===r&&"Expired token received for JSON Web Token validation"===i)window.localStorage.clear(),window.location.href="/";else{if(!(401===r&&"Unauthorized"===i||403===r&&"InvalidToken"===i))return e(n.data);window.localStorage.clear(),window.location.href="/"}}else c.c.warn("Error from server")}))}))}}},458:function(e,t,a){},939:function(e,t,a){},940:function(e,t,a){var s={"./af":664,"./af.js":664,"./ar":665,"./ar-dz":666,"./ar-dz.js":666,"./ar-kw":667,"./ar-kw.js":667,"./ar-ly":668,"./ar-ly.js":668,"./ar-ma":669,"./ar-ma.js":669,"./ar-sa":670,"./ar-sa.js":670,"./ar-tn":671,"./ar-tn.js":671,"./ar.js":665,"./az":672,"./az.js":672,"./be":673,"./be.js":673,"./bg":674,"./bg.js":674,"./bm":675,"./bm.js":675,"./bn":676,"./bn-bd":677,"./bn-bd.js":677,"./bn.js":676,"./bo":678,"./bo.js":678,"./br":679,"./br.js":679,"./bs":680,"./bs.js":680,"./ca":681,"./ca.js":681,"./cs":682,"./cs.js":682,"./cv":683,"./cv.js":683,"./cy":684,"./cy.js":684,"./da":685,"./da.js":685,"./de":686,"./de-at":687,"./de-at.js":687,"./de-ch":688,"./de-ch.js":688,"./de.js":686,"./dv":689,"./dv.js":689,"./el":690,"./el.js":690,"./en-au":691,"./en-au.js":691,"./en-ca":692,"./en-ca.js":692,"./en-gb":693,"./en-gb.js":693,"./en-ie":694,"./en-ie.js":694,"./en-il":695,"./en-il.js":695,"./en-in":696,"./en-in.js":696,"./en-nz":697,"./en-nz.js":697,"./en-sg":698,"./en-sg.js":698,"./eo":699,"./eo.js":699,"./es":700,"./es-do":701,"./es-do.js":701,"./es-mx":702,"./es-mx.js":702,"./es-us":703,"./es-us.js":703,"./es.js":700,"./et":704,"./et.js":704,"./eu":705,"./eu.js":705,"./fa":706,"./fa.js":706,"./fi":707,"./fi.js":707,"./fil":708,"./fil.js":708,"./fo":709,"./fo.js":709,"./fr":710,"./fr-ca":711,"./fr-ca.js":711,"./fr-ch":712,"./fr-ch.js":712,"./fr.js":710,"./fy":713,"./fy.js":713,"./ga":714,"./ga.js":714,"./gd":715,"./gd.js":715,"./gl":716,"./gl.js":716,"./gom-deva":717,"./gom-deva.js":717,"./gom-latn":718,"./gom-latn.js":718,"./gu":719,"./gu.js":719,"./he":720,"./he.js":720,"./hi":721,"./hi.js":721,"./hr":722,"./hr.js":722,"./hu":723,"./hu.js":723,"./hy-am":724,"./hy-am.js":724,"./id":725,"./id.js":725,"./is":726,"./is.js":726,"./it":727,"./it-ch":728,"./it-ch.js":728,"./it.js":727,"./ja":729,"./ja.js":729,"./jv":730,"./jv.js":730,"./ka":731,"./ka.js":731,"./kk":732,"./kk.js":732,"./km":733,"./km.js":733,"./kn":734,"./kn.js":734,"./ko":735,"./ko.js":735,"./ku":736,"./ku.js":736,"./ky":737,"./ky.js":737,"./lb":738,"./lb.js":738,"./lo":739,"./lo.js":739,"./lt":740,"./lt.js":740,"./lv":741,"./lv.js":741,"./me":742,"./me.js":742,"./mi":743,"./mi.js":743,"./mk":744,"./mk.js":744,"./ml":745,"./ml.js":745,"./mn":746,"./mn.js":746,"./mr":747,"./mr.js":747,"./ms":748,"./ms-my":749,"./ms-my.js":749,"./ms.js":748,"./mt":750,"./mt.js":750,"./my":751,"./my.js":751,"./nb":752,"./nb.js":752,"./ne":753,"./ne.js":753,"./nl":754,"./nl-be":755,"./nl-be.js":755,"./nl.js":754,"./nn":756,"./nn.js":756,"./oc-lnc":757,"./oc-lnc.js":757,"./pa-in":758,"./pa-in.js":758,"./pl":759,"./pl.js":759,"./pt":760,"./pt-br":761,"./pt-br.js":761,"./pt.js":760,"./ro":762,"./ro.js":762,"./ru":763,"./ru.js":763,"./sd":764,"./sd.js":764,"./se":765,"./se.js":765,"./si":766,"./si.js":766,"./sk":767,"./sk.js":767,"./sl":768,"./sl.js":768,"./sq":769,"./sq.js":769,"./sr":770,"./sr-cyrl":771,"./sr-cyrl.js":771,"./sr.js":770,"./ss":772,"./ss.js":772,"./sv":773,"./sv.js":773,"./sw":774,"./sw.js":774,"./ta":775,"./ta.js":775,"./te":776,"./te.js":776,"./tet":777,"./tet.js":777,"./tg":778,"./tg.js":778,"./th":779,"./th.js":779,"./tk":780,"./tk.js":780,"./tl-ph":781,"./tl-ph.js":781,"./tlh":782,"./tlh.js":782,"./tr":783,"./tr.js":783,"./tzl":784,"./tzl.js":784,"./tzm":785,"./tzm-latn":786,"./tzm-latn.js":786,"./tzm.js":785,"./ug-cn":787,"./ug-cn.js":787,"./uk":788,"./uk.js":788,"./ur":789,"./ur.js":789,"./uz":790,"./uz-latn":791,"./uz-latn.js":791,"./uz.js":790,"./vi":597,"./vi.js":597,"./x-pseudo":792,"./x-pseudo.js":792,"./yo":793,"./yo.js":793,"./zh-cn":794,"./zh-cn.js":794,"./zh-hk":795,"./zh-hk.js":795,"./zh-mo":796,"./zh-mo.js":796,"./zh-tw":797,"./zh-tw.js":797};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=940},976:function(e,t,a){"use strict";a.r(t);var s=a(512),n=a.n(s),r=a(30),c=a(1),i=a(513),o=a(16),u=a(0),j=a(475),l=a.n(j),d=a(650),m=a(623),f=a(649),v=a(631),b=a(933),h=a(659),p=a(660),g=a(658),O=(a(939),a(458),a(474)),k=a.n(O),x=a(123),y=a(124),w=a(453),A=function(){function e(){Object(x.a)(this,e)}return Object(y.a)(e,null,[{key:"getList",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",new Promise((function(e){w.a.send({method:"POST",path:"AppDevices/find",data:t}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.statusCode,s=t.data;if(200===a){for(var n=0;n<s.data.length;n++)s.data[n]&&(s.data[n].key=s.data.length-n);return e(s)}return e({})}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateDevice",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",new Promise((function(e){w.a.send({method:"POST",path:"AppDevices/UpdateById",data:t}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.statusCode;return e(200===a?{isSuccess:!0}:{isSuccess:!1})}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteDeviceById",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){w.a.send({method:"POST",path:"AppDevices/deleteById",data:{id:t}}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.statusCode;return e(200===a?{isSuccess:!0}:{isSuccess:!1})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),S=a(465),z=a.n(S),N=a(116),C=(a(597),a(466)),M=a.n(C),D=a(126),L=a(6),P={filter:{},skip:0,limit:20,order:{key:"createdAt",value:"desc"}},I=["locked","ok"];function T(e){var t,a,s=e.intl,j=Object(u.useState)(!1),O=Object(o.a)(j,2),x=O[0],y=O[1],w=Object(u.useState)(P),S=Object(o.a)(w,2),C=S[0],D=S[1],T=Object(u.useState)(1),U=Object(o.a)(T,2),E=U[0],F=U[1],B=Object(u.useState)({data:[],total:0}),R=Object(o.a)(B,2),Y=R[0],q=R[1],J=Object(u.useState)(""),W=Object(o.a)(J,2),_=W[0],H=W[1],Q=Object(u.useState)("ALL"),V=Object(o.a)(Q,2),G=V[0],K=V[1];function X(){return(X=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.deleteDeviceById(t.appDeviceId).then((function(e){var t={action:s.formatMessage({id:"delete"})};e&&e.isSuccess?(N.c.success(s.formatMessage({id:"actionSuccess"},t)),ee(C,!0)):N.c.error(s.formatMessage({id:"actionFailed"},t))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){A.updateDevice({id:e.appDeviceId,data:{deviceStatus:0===e.deviceStatus?1:0}}).then((function(e){var t={action:s.formatMessage({id:"update"})};e.isSuccess?(N.c.success(s.formatMessage({id:"actionSuccess"},t)),ee(C,!0)):N.c.error(s.formatMessage({id:"actionFailed"},t))}))}var $=[{name:s.formatMessage({id:"index"}),selector:function(e){return e.key},sortable:!0,maxWidth:"60px"},{name:s.formatMessage({id:"deviceName"}),selector:function(e){return e.devicePrettyProductName}},{name:s.formatMessage({id:"stations"}),cell:function(e){var t=e.stationUrl,a=e.stationsName;return Object(L.jsx)("div",{className:"text-link pointer",onClick:function(){return window.open("https://".concat(t),"_blank")},children:a})}},{name:s.formatMessage({id:"status"}),cell:function(e){return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:s.formatMessage({id:I[Number(e.deviceStatus)]})})})}},{name:s.formatMessage({id:"createdAt"}),cell:function(e){var t=e.createdAt;return Object(L.jsx)("div",{children:M()(t).locale("vi").format("hh:mm DD/MM/YYYY")})}},{name:s.formatMessage({id:"deviceOS"}),selector:function(e){return e.deviceOSName}},{name:"",cell:function(e){return Object(L.jsxs)(L.Fragment,{children:[0===e.deviceStatus?Object(L.jsx)(d.a,{size:20,onClick:function(){return Z(e)},className:"mr-2 pointer"}):Object(L.jsx)(m.a,{size:20,onClick:function(){return Z(e)},className:"mr-2 pointer"}),Object(L.jsx)(f.a,{size:20,onClick:function(){return function(e){return X.apply(this,arguments)}(e)},className:"pointer"})]})}}],ee=function(e,t){t||y(!0),Object.keys(e.filter).forEach((function(t){e.filter[t]&&""!==e.filter[t]||delete e.filter[t]})),A.getList(e).then((function(a){D(e),a&&!z.a.isEmpty(a)?q(a):(N.c.warn("C\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ngt th\u1eed l\u1ea1i sau!"),q({total:0,data:[]})),t||y(!1)}))};Object(u.useEffect)((function(){ee(C)}),[]);var te=function(e,t){var a=Object(c.a)(Object(c.a)({},C),{},{filter:Object(c.a)(Object(c.a)(Object(c.a)({},C.filter),t),{},{deviceStatus:t.deviceStatus}),searchText:e||void 0,skip:0});ee(a,!0)};return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(b.a,{children:[Object(L.jsxs)(h.a,{className:"mx-0 mt-1 mb-50",children:[Object(L.jsx)(p.a,{sm:"4",children:Object(L.jsx)("div",{className:"d-flex align-items-center",children:Object(L.jsx)(g.a,(t={className:"dataTable-select",value:_,name:"searchText",bsSize:"sm",placeholder:s.formatMessage({id:"Search"})},Object(r.a)(t,"className","w-75 ml-2"),Object(r.a)(t,"onChange",(function(e){H(e.target.value)})),Object(r.a)(t,"onKeyDown",(function(e){var t=e.target.value;13===e.keyCode&&te(t||void 0)})),t))})}),Object(L.jsx)(p.a,{sm:"4",children:Object(L.jsx)("div",{className:"d-flex align-items-center",children:Object(L.jsxs)(g.a,(a={className:"dataTable-select",name:"deviceStatus",bsSize:"sm",type:"select",placeholder:"L\u1ecdc tr\u1ea1ng th\xe1i"},Object(r.a)(a,"className","w-75 ml-2"),Object(r.a)(a,"id","sort-select"),Object(r.a)(a,"value",G),Object(r.a)(a,"onChange",(function(e){var t=e.target,a=t.name,s=t.value;K(s),te(void 0,"ALL"!==s?Object(r.a)({},a,s):Object(r.a)({},a,void 0))})),Object(r.a)(a,"children",[Object(L.jsx)("option",{value:"ALL",children:s.formatMessage({id:"all"})}),I.map((function(e,t){return Object(L.jsx)("option",{value:Number(t),children:s.formatMessage({id:e})},Math.random())}))]),a))})}),Object(L.jsx)(p.a,{sm:"4"})]}),Object(L.jsx)(l.a,{pagination:!0,noHeader:!0,paginationServer:!0,className:"react-dataTable",columns:$,sortIcon:Object(L.jsx)(v.a,{size:10}),paginationComponent:function(){var e=Number(Math.ceil(Y/20).toFixed(0));return Object(L.jsx)(k.a,{previousLabel:"",nextLabel:"",breakLabel:"...",pageCount:e||1,marginPagesDisplayed:2,pageRangeDisplayed:2,activeClassName:"active",forcePage:0!==E?E-1:0,onPageChange:function(e){return function(e){var t=Object(c.a)(Object(c.a)({},C),{},{skip:e.selected*C.limit});ee(t),F(e.selected+1)}(e)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:Y.data,progressPending:x})]})})}t.default=Object(D.c)(Object(u.memo)(T))}}]);
//# sourceMappingURL=22.2e0d01f5.chunk.js.map