(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[20],{452:function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return i}));var a=s(460),n=s.n(a),c=function(e){var t=n.a.stringify(e);return t?"?".concat(t):""};function r(e,t,s){var a=new Image;a.crossOrigin="Anonymous",a.onload=function(){var e,a=document.createElement("CANVAS"),n=a.getContext("2d");a.height=this.naturalHeight,a.width=this.naturalWidth,n.drawImage(this,0,0),e=a.toDataURL(s),t(e)},a.src=e,(a.complete||void 0===a.complete)&&(a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",a.src=e)}function i(e){return new Promise((function(t,s){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=s}))}},453:function(e,t,s){"use strict";var a=s(78),n=s.n(a),c="https://cdn.kiemdinhoto.vn/",r=s(116),i=s(452);t.a={send:function(e){var t=e.method,s=void 0===t?"get":t,a=e.path,o=e.data,d=void 0===o?null:o,u=e.query,m=void 0===u?null:u,l=e.headers,j=void 0===l?{}:l,h=e.newUrl;return new Promise((function(e){var t=c+"".concat(a).concat(Object(i.b)(m));h&&(t="".concat(h).concat(Object(i.b)(m)));var o=window.localStorage.getItem("accessToken");if(o){var u=o.replace(/"/g,"");j.Authorization="Bearer ".concat(u)}n()({method:s,url:t,data:d,headers:j}).then((function(t){var s=t.data;return e(s)})).catch((function(t){var s=t.response,a=void 0===s?{}:s,n=a.data?a.data:null;if(n){var c=n.statusCode,i=n.message;if(505===c)r.c.warn("Unauthorized");else if(401===c&&"Expired token received for JSON Web Token validation"===i)window.localStorage.clear(),window.location.href="/";else{if(!(401===c&&"Unauthorized"===i||403===c&&"InvalidToken"===i))return e(n.data);window.localStorage.clear(),window.location.href="/"}}else r.c.warn("Error from server")}))}))}}},458:function(e,t,s){},472:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s(0),s(473);var a=s(6);function n(e){var t=e.onChange,s=e.checked,n=e.disabled;return Object(a.jsxs)("label",{className:"switch",children:[Object(a.jsx)("input",{type:"checkbox",checked:s,onChange:t,disabled:n}),Object(a.jsx)("span",{className:"slider round"})]})}},473:function(e,t,s){},502:function(e,t,s){},503:function(e,t,s){},964:function(e,t,s){"use strict";s.r(t);var a=s(30),n=s(1),c=s(16),r=s(0),i=s(116),o=(s(465),s(502),s(467)),d=(s(458),s(453)),u=(s(514),s(515),s(503),s(933)),m=s(659),l=s(660),j=s(929),h=s(960),b=s(947),p=s(658),f=s(447),O=s(457),v=s(126),g=s(472),x=s(632),A=s(6),S=function(e){var t=e.intl,s=Object(O.h)().state,v=Object(r.useState)({}),S=Object(c.a)(v,2),P=S[0],w=S[1],M=Object(r.useState)(0),C=Object(c.a)(M,2),T=C[0],k=C[1],y=Object(O.g)(),U=Object(o.a)({defaultValues:{}}),N=U.register,H=U.errors,I=U.handleSubmit;Object(r.useEffect)((function(){s&&Object.keys(s).length>0&&(w(JSON.parse(s.stationCustomSMTPConfig)),k(s.stationUseCustomSMTP))}),[s]);var R=function(e,t){w(Object(n.a)(Object(n.a)({},P),{},Object(a.a)({},e,t)))};return Object(A.jsx)(r.Fragment,{children:Object(A.jsxs)(u.a,{children:[Object(A.jsxs)("div",{className:"pt-1 pl-1 pointer",onClick:y.goBack,children:[Object(A.jsx)(x.a,{}),t.formatMessage({id:"goBack"})]}),Object(A.jsxs)("div",{className:"accountAdmin",children:[Object(A.jsx)("h1",{className:"accountAdmin__title",children:t.formatMessage({id:"info"},{type:"email server (SMTP)"}).toUpperCase()}),Object(A.jsx)(m.a,{children:Object(A.jsx)(l.a,{sm:"12",md:"8",children:Object(A.jsxs)(j.a,{onSubmit:I((function(e){!function(e){if(1===T){if(0===Object.keys(H).length){var a={stationsId:s.stationsId,smtpHost:e.smtpHost,smtpPort:Number(e.smtpPort),smtpSecure:P.smtpSecure.toUpperCase(),smtpAuth:{user:e.smtpAuthUser,pass:e.smtpAuthPass}};d.a.send({method:"POST",path:"Stations/updateConfigSMTP",data:a,query:null}).then((function(e){e&&(200===e.statusCode?(i.c.success(t.formatMessage({id:"actionSuccess"},{action:t.formatMessage({id:"update"})})),setTimeout((function(){y.push("/pages/station")}),1e3)):i.c.warn(t.formatMessage({id:"actionFailed"},{action:t.formatMessage({id:"update"})})))}))}}else i.c.success(t.formatMessage({id:"actionSuccess"},{action:t.formatMessage({id:"update"})})),setTimeout((function(){y.push("/pages/station")}),1e3)}(e)})),children:[Object(A.jsxs)("div",{className:"row",children:[Object(A.jsx)(h.a,{sm:"3",children:t.formatMessage({id:"stationUseCustomSMSBrand"},{type:"SMTP"})}),Object(A.jsx)(l.a,{sm:"9",children:Object(A.jsx)(g.a,{checked:1===T,onChange:function(e){return a=e.target.checked?1:0,void d.a.send({method:"POST",path:"Stations/updateCustomSMTP",data:{stationsId:s.stationsId,CustomSMTP:a},query:null}).then((function(e){e&&(200===e.statusCode?k(a):i.c.warn(t.formatMessage({id:"actionFailed"},{action:t.formatMessage({id:"update"})})))}));var a}})})]}),Object(A.jsxs)(b.a,{row:!0,children:[Object(A.jsx)(h.a,{sm:"3",for:"smtpSecure",children:"B\u1ea3o m\u1eadt SMTP (SMTP Secure)"}),Object(A.jsx)(l.a,{sm:"6",children:Object(A.jsx)(g.a,{checked:!(!P||"ON"!==P.smtpSecure),onChange:function(e){R("smtpSecure",e.target.checked?"ON":"OFF")},disabled:0===T})})]}),Object(A.jsxs)(b.a,{row:!0,children:[Object(A.jsx)(h.a,{sm:"3",for:"smtpHost",children:"SMTP Host"}),Object(A.jsx)(l.a,{sm:"5",children:Object(A.jsx)(p.a,{id:"smtpHost",name:"smtpHost",innerRef:N({required:0!==T}),invalid:H.smtpHost&&!0,placeholder:"SMS Url",disabled:0===T,value:P&&P.smtpHost||"",onChange:function(e){var t=e.target,s=t.name,a=t.value;R(s,a)}})}),Object(A.jsx)(l.a,{sm:"4",children:Object(A.jsx)("i",{children:"V\xed d\u1ee5: user17.emailserver.vn"})})]}),Object(A.jsxs)(b.a,{row:!0,children:[Object(A.jsx)(h.a,{sm:"3",for:"smtpPort",children:"SMTP Port"}),Object(A.jsx)(l.a,{sm:"5",children:Object(A.jsx)(p.a,{id:"smtpPort",name:"smtpPort",innerRef:N({required:0!==T}),invalid:H.smtpPort&&!0,placeholder:"SMTP Port",disabled:0===T,value:P&&P.smtpPort&&P.smtpPort||"",onChange:function(e){var t=e.target,s=t.name,a=t.value;R(s,a)}})}),Object(A.jsx)(l.a,{sm:"4",children:Object(A.jsx)("i",{children:"V\xed d\u1ee5: 123"})})]}),Object(A.jsxs)(b.a,{row:!0,children:[Object(A.jsx)(h.a,{sm:"3",for:"smtpAuthUser",children:"Email"}),Object(A.jsx)(l.a,{sm:"5",children:Object(A.jsx)(p.a,{name:"smtpAuthUser",id:"smtpAuthUser",innerRef:N({required:0!==T}),invalid:H.smtpAuthUser&&!0,value:P&&P.smtpAuth&&P.smtpAuth.user||"",disabled:0===T,placeholder:t.formatMessage({id:"smsUsername"},{type:"SMTP"}),onChange:function(e){var t=e.target,s=(t.name,t.value);w(Object(n.a)(Object(n.a)({},P),{},{smtpAuth:Object(n.a)(Object(n.a)({},P.smtpAuth),{},{user:s})}))}})}),Object(A.jsx)(l.a,{sm:"4",children:Object(A.jsx)("i",{children:"V\xed d\u1ee5: example@example.vn"})})]}),Object(A.jsxs)(b.a,{row:!0,children:[Object(A.jsx)(h.a,{sm:"3",for:"smtpAuthPass",children:t.formatMessage({id:"smsPassword"},{type:""})}),Object(A.jsx)(l.a,{sm:"5",children:Object(A.jsx)(p.a,{name:"smtpAuthPass",id:"smtpAuthPass",innerRef:N({required:!0}),invalid:H.smtpAuthPass&&!0,disabled:0===T,value:P&&P.smtpAuth&&P.smtpAuth.pass||"",placeholder:t.formatMessage({id:"smsPassword"},{type:"SMTP"}),onChange:function(e){var t=e.target,s=(t.name,t.value);w(Object(n.a)(Object(n.a)({},P),{},{smtpAuth:Object(n.a)(Object(n.a)({},P.smtpAuth),{},{pass:s})}))}})}),Object(A.jsx)(l.a,{sm:"4",children:Object(A.jsx)("i",{children:"V\xed d\u1ee5: abc123..."})})]}),Object(A.jsx)(b.a,{className:"d-flex mb-0 justify-content-center",children:Object(A.jsx)(f.a.Ripple,{className:"mr-1",color:"primary",type:"submit",children:t.formatMessage({id:"submit"})})})]})})})]})]})})};t.default=Object(v.c)(Object(r.memo)(S))}}]);
//# sourceMappingURL=20.ff9cd903.chunk.js.map